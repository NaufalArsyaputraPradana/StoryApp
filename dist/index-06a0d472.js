var Zt=Object.defineProperty;var Yt=(t,e,o)=>e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var Y=(t,e,o)=>(Yt(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();class y{static getUserData(){const e=localStorage.getItem("userData");return e?JSON.parse(e):null}static setUserData(e){localStorage.setItem("userData",JSON.stringify(e))}static getToken(){const e=this.getUserData();return e?e.token:null}static getUserId(){const e=this.getUserData();return e?e.userId:null}static getUserName(){const e=this.getUserData();return e?e.name:null}static isLoggedIn(){return!!this.getToken()}static logout(){localStorage.removeItem("userData")}}class pe{constructor(){this._baseUrl="https://story-api.dicoding.dev/v1"}async getStories(e=1,o=10,s=0){try{const a=y.getToken();if(!a)throw new Error("Anda belum login");console.log(`Fetching stories: page=${e}, size=${o}, location=${s}`);const r=await(await fetch(`${this._baseUrl}/stories?page=${e}&size=${o}&location=${s}`,{headers:{Authorization:`Bearer ${a}`}})).json();if(r.error)throw new Error(r.message);return console.log("Stories fetched:",r.listStory.length),r.listStory}catch(a){throw console.error("Error getting stories:",a),new Error(a.message||"Gagal mengambil daftar cerita")}}async getStoryDetail(e){try{const o=y.getToken();if(!o)throw new Error("Anda belum login");console.log("Fetching story detail for ID:",e);const a=await(await fetch(`${this._baseUrl}/stories/${e}`,{headers:{Authorization:`Bearer ${o}`}})).json();if(a.error)throw new Error(a.message);return console.log("Story detail fetched"),a.story}catch(o){throw console.error("Error getting story detail:",o),new Error(o.message||"Gagal mengambil detail cerita")}}async addStory(e,o,s=null,a=null){try{const i=y.getToken(),r=new FormData;r.append("description",e),r.append("photo",o),s!==null&&a!==null&&(r.append("lat",s),r.append("lon",a));const l=i?`${this._baseUrl}/stories`:`${this._baseUrl}/stories/guest`,d=i?{Authorization:`Bearer ${i}`}:{};console.log("Adding new story",i?"with auth":"as guest");const v=await(await fetch(l,{method:"POST",headers:d,body:r})).json();if(v.error)throw new Error(v.message);return console.log("Story added successfully"),v}catch(i){throw console.error("Error adding story:",i),new Error(i.message||"Gagal menambahkan cerita")}}}class Jt{constructor(e,o){this._model=e,this._view=o}async getStories(){try{this._view.showLoading();const e=await this._model.getStories(1,10,1);this._view.renderStories(e)}catch(e){console.error("Home presenter error:",e),this._view.showError(e.message)}}}class k{static async openDB(){return new Promise((e,o)=>{if(!("indexedDB"in window)){o(new Error("Browser tidak mendukung IndexedDB"));return}const s=indexedDB.open(this.DB_NAME,this.DB_VERSION);s.onerror=a=>{console.error("IndexedDB error:",a.target.error),o(new Error("Gagal membuka database"))},s.onsuccess=()=>e(s.result),s.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(this.STORE_STORIES)||i.createObjectStore(this.STORE_STORIES,{keyPath:"id"}),i.objectStoreNames.contains(this.STORE_FAVORITES)||i.createObjectStore(this.STORE_FAVORITES,{keyPath:"id"})}})}static async saveStories(e){const s=(await this.openDB()).transaction(this.STORE_STORIES,"readwrite"),a=s.objectStore(this.STORE_STORIES);return e.forEach(i=>a.put(i)),new Promise((i,r)=>{s.oncomplete=()=>i(e),s.onerror=l=>r(new Error("Gagal menyimpan stories ke IndexedDB"))})}static async getStories(){const a=(await this.openDB()).transaction(this.STORE_STORIES,"readonly").objectStore(this.STORE_STORIES).getAll();return new Promise((i,r)=>{a.onsuccess=()=>i(a.result),a.onerror=l=>r(new Error("Gagal mengambil stories dari IndexedDB"))})}static async getStoryById(e){const i=(await this.openDB()).transaction(this.STORE_STORIES,"readonly").objectStore(this.STORE_STORIES).get(e);return new Promise((r,l)=>{i.onsuccess=()=>r(i.result),i.onerror=d=>l(new Error("Gagal mengambil story dari IndexedDB"))})}static async deleteStory(e){const i=(await this.openDB()).transaction(this.STORE_STORIES,"readwrite").objectStore(this.STORE_STORIES).delete(e);return new Promise((r,l)=>{i.onsuccess=()=>r(!0),i.onerror=d=>l(new Error(`Gagal menghapus story dengan id ${e} dari IndexedDB`))})}static async clearStories(){const a=(await this.openDB()).transaction(this.STORE_STORIES,"readwrite").objectStore(this.STORE_STORIES).clear();return new Promise((i,r)=>{a.onsuccess=()=>i(!0),a.onerror=l=>r(new Error("Gagal menghapus semua stories dari IndexedDB"))})}static async addToFavorites(e){const a=(await this.openDB()).transaction(this.STORE_FAVORITES,"readwrite").objectStore(this.STORE_FAVORITES);return new Promise((i,r)=>{const l=a.put(e);l.onsuccess=()=>i(!0),l.onerror=d=>r(new Error("Gagal menambahkan story ke favorit"))})}static async removeFromFavorites(e){const a=(await this.openDB()).transaction(this.STORE_FAVORITES,"readwrite").objectStore(this.STORE_FAVORITES);return new Promise((i,r)=>{const l=a.delete(e);l.onsuccess=()=>i(!0),l.onerror=d=>r(new Error("Gagal menghapus story dari favorit"))})}static async getFavorites(){const s=(await this.openDB()).transaction(this.STORE_FAVORITES,"readonly").objectStore(this.STORE_FAVORITES);return new Promise((a,i)=>{const r=s.getAll();r.onsuccess=()=>a(r.result),r.onerror=l=>i(new Error("Gagal mengambil daftar favorit"))})}static async isFavorite(e){const a=(await this.openDB()).transaction(this.STORE_FAVORITES,"readonly").objectStore(this.STORE_FAVORITES);return new Promise((i,r)=>{const l=a.get(e);l.onsuccess=()=>i(!!l.result),l.onerror=d=>r(new Error("Gagal memeriksa status favorit"))})}}Y(k,"DB_NAME","storyapp-db"),Y(k,"DB_VERSION",1),Y(k,"STORE_STORIES","stories"),Y(k,"STORE_FAVORITES","favorites");function Xt({user:t}){const e=!!t;return`
    <button id="sidebar-open" class="sidebar-open-btn" aria-label="Buka menu">
      <i class="fas fa-chevron-right"></i>
    </button>
    <aside class="app-sidebar" id="app-sidebar" aria-label="Navigasi utama">
      <button id="sidebar-toggle" class="sidebar-close-btn" aria-label="Tutup menu">
        <i class="fas fa-chevron-left"></i>
      </button>
      <div class="sidebar-header">
        <img src="/note.png" alt="Logo StoryApp" class="sidebar-logo" />
        <h1 class="sidebar-title"><a href="#/">StoryApp</a></h1>
      </div>
      <nav class="sidebar-nav" aria-label="Menu">
        <ul>
          <li><a href="#/"><i class="fas fa-home"></i> Beranda</a></li>
          ${e?`
            <li><a href="#/add" id="add-menu"><i class="fas fa-plus-circle"></i> Tambah Cerita</a></li>
            <li><a href="#/map" id="map-menu"><i class="fas fa-map-marked-alt"></i> Peta Cerita</a></li>
            <li><a href="#/favorites" id="favorites-menu"><i class="fas fa-bookmark"></i> Favorit</a></li>
          `:""}
          <li><a href="#/about" id="about-menu"><i class="fas fa-info-circle"></i> Tentang Kami</a></li>
        </ul>
      </nav>
      <div class="sidebar-user">
        ${e?`<div class="sidebar-user-info">
                <i class="fas fa-user-circle"></i>
                <span>${t.name||t}</span>
             </div>
             <button id="logout-menu" class="sidebar-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>`:`<a href="#/login" id="login-menu" class="sidebar-btn"><i class="fas fa-sign-in-alt"></i> Login</a>
             <a href="#/register" id="register-menu" class="sidebar-btn"><i class="fas fa-user-plus"></i> Register</a>`}
      </div>
      <div class="sidebar-footer">
        <div class="sidebar-social">
          <a href="https://github.com/naufalarsyaputra" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
          <a href="https://linkedin.com/in/naufalarsyaputra" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
          <a href="https://instagram.com/naufalarsyaputra" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </aside>
  `}function Qt(){const t=document.getElementById("app-sidebar"),e=document.getElementById("sidebar-open"),o=document.getElementById("sidebar-toggle");e&&t&&(e.onclick=()=>{t.classList.add("open"),document.body.classList.add("sidebar-opened"),e.classList.add("hide")}),o&&t&&(o.onclick=()=>{t.classList.remove("open"),document.body.classList.remove("sidebar-opened"),e.classList.remove("hide")}),t==null||t.querySelectorAll("a").forEach(s=>{s.onclick=()=>{t.classList.remove("open"),document.body.classList.remove("sidebar-opened"),e.classList.remove("hide")}})}function eo(){return`
    <footer class="app-shell-footer">
      <div class="footer-content">
        <div class="footer-main">
          <div class="footer-brand">
            <img src="/note.png" alt="Logo StoryApp" class="footer-logo" />
            <h3 class="footer-title">StoryApp</h3>
            <p class="footer-tagline">Berbagi cerita dengan komunitas</p>
          </div>
          <nav class="footer-links" aria-label="Footer Navigation">
            <div class="link-group">
              <h4>Navigasi</h4>
              <a href="#/">Beranda</a>
              <a href="#/map">Peta Cerita</a>
              <a href="#/about">Tentang Kami</a>
            </div>
            <div class="link-group">
              <h4>Akun</h4>
              <a href="#/login">Login</a>
              <a href="#/register">Daftar</a>
              <a href="#/favorites">Favorit</a>
            </div>
          </nav>
        </div>
        <div class="footer-bottom">
          <div class="footer-divider"></div>
          <div class="footer-meta">
            <span>Â© ${new Date().getFullYear()} <b>StoryApp</b> &mdash; Naufal Arsyaputra Pradana</span>
            <div class="social-links">
              <a href="https://github.com/naufalarsyaputra" target="_blank" rel="noopener" aria-label="GitHub">
                <i class="fab fa-github"></i>
              </a>
              <a href="https://linkedin.com/in/naufalarsyaputra" target="_blank" rel="noopener" aria-label="LinkedIn">
                <i class="fab fa-linkedin"></i>
              </a>
              <a href="https://instagram.com/naufalarsyaputra" target="_blank" rel="noopener" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  `}/*!
* sweetalert2 v11.22.0
* Released under the MIT License.
*/function et(t,e,o){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:o;throw new TypeError("Private element is not present on this object")}function to(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qe(t,e){return t.get(et(t,e))}function oo(t,e,o){to(t,e),e.set(t,o)}function so(t,e,o){return t.set(et(t,e),o),o}const ao=100,c={},io=()=>{c.previousActiveElement instanceof HTMLElement?(c.previousActiveElement.focus(),c.previousActiveElement=null):document.body&&document.body.focus()},no=t=>new Promise(e=>{if(!t)return e();const o=window.scrollX,s=window.scrollY;c.restoreFocusTimeout=setTimeout(()=>{io(),e()},ao),window.scrollTo(o,s)}),tt="swal2-",ro=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],n=ro.reduce((t,e)=>(t[e]=tt+e,t),{}),lo=["success","warning","info","question","error"],ae=lo.reduce((t,e)=>(t[e]=tt+e,t),{}),ot="SweetAlert2:",Be=t=>t.charAt(0).toUpperCase()+t.slice(1),E=t=>{console.warn(`${ot} ${typeof t=="object"?t.join(" "):t}`)},R=t=>{console.error(`${ot} ${t}`)},Ve=[],co=t=>{Ve.includes(t)||(Ve.push(t),E(t))},st=(t,e=null)=>{co(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},fe=t=>typeof t=="function"?t():t,Pe=t=>t&&typeof t.toPromise=="function",J=t=>Pe(t)?t.toPromise():Promise.resolve(t),Ie=t=>t&&Promise.resolve(t)===t,_=()=>document.body.querySelector(`.${n.container}`),X=t=>{const e=_();return e?e.querySelector(t):null},x=t=>X(`.${t}`),u=()=>x(n.popup),W=()=>x(n.icon),uo=()=>x(n["icon-content"]),at=()=>x(n.title),Te=()=>x(n["html-container"]),it=()=>x(n.image),Ae=()=>x(n["progress-steps"]),we=()=>x(n["validation-message"]),A=()=>X(`.${n.actions} .${n.confirm}`),G=()=>X(`.${n.actions} .${n.cancel}`),j=()=>X(`.${n.actions} .${n.deny}`),ho=()=>x(n["input-label"]),K=()=>X(`.${n.loader}`),Q=()=>x(n.actions),nt=()=>x(n.footer),ge=()=>x(n["timer-progress-bar"]),$e=()=>x(n.close),mo=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Me=()=>{const t=u();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),o=Array.from(e).sort((i,r)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),d=parseInt(r.getAttribute("tabindex")||"0");return l>d?1:l<d?-1:0}),s=t.querySelectorAll(mo),a=Array.from(s).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(o.concat(a))].filter(i=>C(i))},Oe=()=>$(document.body,n.shown)&&!$(document.body,n["toast-shown"])&&!$(document.body,n["no-backdrop"]),be=()=>{const t=u();return t?$(t,n.toast):!1},po=()=>{const t=u();return t?t.hasAttribute("data-loading"):!1},B=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(r=>{t.appendChild(r)});const i=s.querySelector("body");i&&Array.from(i.childNodes).forEach(r=>{r instanceof HTMLVideoElement||r instanceof HTMLAudioElement?t.appendChild(r.cloneNode(!0)):t.appendChild(r)})}},$=(t,e)=>{if(!e)return!1;const o=e.split(/\s+/);for(let s=0;s<o.length;s++)if(!t.classList.contains(o[s]))return!1;return!0},fo=(t,e)=>{Array.from(t.classList).forEach(o=>{!Object.values(n).includes(o)&&!Object.values(ae).includes(o)&&!Object.values(e.showClass||{}).includes(o)&&t.classList.remove(o)})},S=(t,e,o)=>{if(fo(t,e),!e.customClass)return;const s=e.customClass[o];if(s){if(typeof s!="string"&&!s.forEach){E(`Invalid type of customClass.${o}! Expected string or iterable object, got "${typeof s}"`);return}h(t,s)}},ve=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${n.popup} > .${n[e]}`);case"checkbox":return t.querySelector(`.${n.popup} > .${n.checkbox} input`);case"radio":return t.querySelector(`.${n.popup} > .${n.radio} input:checked`)||t.querySelector(`.${n.popup} > .${n.radio} input:first-child`);case"range":return t.querySelector(`.${n.popup} > .${n.range} input`);default:return t.querySelector(`.${n.popup} > .${n.input}`)}},rt=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},lt=(t,e,o)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(a=>{o?a.classList.add(s):a.classList.remove(s)}):o?t.classList.add(s):t.classList.remove(s)}))},h=(t,e)=>{lt(t,e,!0)},P=(t,e)=>{lt(t,e,!1)},M=(t,e)=>{const o=Array.from(t.children);for(let s=0;s<o.length;s++){const a=o[s];if(a instanceof HTMLElement&&$(a,e))return a}},F=(t,e,o)=>{o===`${parseInt(o)}`&&(o=parseInt(o)),o||parseInt(o)===0?t.style.setProperty(e,typeof o=="number"?`${o}px`:o):t.style.removeProperty(e)},w=(t,e="flex")=>{t&&(t.style.display=e)},b=t=>{t&&(t.style.display="none")},De=(t,e="block")=>{t&&new MutationObserver(()=>{ee(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Ne=(t,e,o,s)=>{const a=t.querySelector(e);a&&a.style.setProperty(o,s)},ee=(t,e,o="flex")=>{e?w(t,o):b(t)},C=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),wo=()=>!C(A())&&!C(j())&&!C(G()),Ce=t=>t.scrollHeight>t.clientHeight,go=(t,e)=>{let o=t;for(;o&&o!==e;){if(Ce(o))return!0;o=o.parentElement}return!1},ct=t=>{const e=window.getComputedStyle(t),o=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return o>0||s>0},Fe=(t,e=!1)=>{const o=ge();o&&C(o)&&(e&&(o.style.transition="none",o.style.width="100%"),setTimeout(()=>{o.style.transition=`width ${t/1e3}s linear`,o.style.width="0%"},10))},bo=()=>{const t=ge();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const o=parseInt(window.getComputedStyle(t).width),s=e/o*100;t.style.width=`${s}%`},vo=()=>typeof window>"u"||typeof document>"u",yo=`
 <div aria-labelledby="${n.title}" aria-describedby="${n["html-container"]}" class="${n.popup}" tabindex="-1">
   <button type="button" class="${n.close}"></button>
   <ul class="${n["progress-steps"]}"></ul>
   <div class="${n.icon}"></div>
   <img class="${n.image}" />
   <h2 class="${n.title}" id="${n.title}"></h2>
   <div class="${n["html-container"]}" id="${n["html-container"]}"></div>
   <input class="${n.input}" id="${n.input}" />
   <input type="file" class="${n.file}" />
   <div class="${n.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${n.select}" id="${n.select}"></select>
   <div class="${n.radio}"></div>
   <label class="${n.checkbox}">
     <input type="checkbox" id="${n.checkbox}" />
     <span class="${n.label}"></span>
   </label>
   <textarea class="${n.textarea}" id="${n.textarea}"></textarea>
   <div class="${n["validation-message"]}" id="${n["validation-message"]}"></div>
   <div class="${n.actions}">
     <div class="${n.loader}"></div>
     <button type="button" class="${n.confirm}"></button>
     <button type="button" class="${n.deny}"></button>
     <button type="button" class="${n.cancel}"></button>
   </div>
   <div class="${n.footer}"></div>
   <div class="${n["timer-progress-bar-container"]}">
     <div class="${n["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),ko=()=>{const t=_();return t?(t.remove(),P([document.documentElement,document.body],[n["no-backdrop"],n["toast-shown"],n["has-column"]]),!0):!1},D=()=>{c.currentInstance.resetValidationMessage()},Eo=()=>{const t=u(),e=M(t,n.input),o=M(t,n.file),s=t.querySelector(`.${n.range} input`),a=t.querySelector(`.${n.range} output`),i=M(t,n.select),r=t.querySelector(`.${n.checkbox} input`),l=M(t,n.textarea);e.oninput=D,o.onchange=D,i.onchange=D,r.onchange=D,l.oninput=D,s.oninput=()=>{D(),a.value=s.value},s.onchange=()=>{D(),a.value=s.value}},Lo=t=>typeof t=="string"?document.querySelector(t):t,_o=t=>{const e=u();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},Co=t=>{window.getComputedStyle(t).direction==="rtl"&&h(_(),n.rtl)},So=t=>{const e=ko();if(vo()){R("SweetAlert2 requires document to initialize");return}const o=document.createElement("div");o.className=n.container,e&&h(o,n["no-transition"]),B(o,yo),o.dataset.swal2Theme=t.theme;const s=Lo(t.target);s.appendChild(o),t.topLayer&&(o.setAttribute("popover",""),o.showPopover()),_o(t),Co(s),Eo()},He=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?xo(t,e):t&&B(e,t)},xo=(t,e)=>{t.jquery?Bo(e,t):B(e,t.toString())},Bo=(t,e)=>{if(t.textContent="",0 in e)for(let o=0;o in e;o++)t.appendChild(e[o].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},Po=(t,e)=>{const o=Q(),s=K();!o||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?b(o):w(o),S(o,e,"actions"),Io(o,s,e),B(s,e.loaderHtml||""),S(s,e,"loader"))};function Io(t,e,o){const s=A(),a=j(),i=G();!s||!a||!i||(ke(s,"confirm",o),ke(a,"deny",o),ke(i,"cancel",o),To(s,a,i,o),o.reverseButtons&&(o.toast?(t.insertBefore(i,s),t.insertBefore(a,s)):(t.insertBefore(i,e),t.insertBefore(a,e),t.insertBefore(s,e))))}function To(t,e,o,s){if(!s.buttonsStyling){P([t,e,o],n.styled);return}h([t,e,o],n.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&o.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),ye(t),ye(e),ye(o)}function ye(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const o=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${o}`))}function ke(t,e,o){const s=Be(e);ee(t,o[`show${s}Button`],"inline-block"),B(t,o[`${e}ButtonText`]||""),t.setAttribute("aria-label",o[`${e}ButtonAriaLabel`]||""),t.className=n[e],S(t,o,`${e}Button`)}const Ao=(t,e)=>{const o=$e();o&&(B(o,e.closeButtonHtml||""),S(o,e,"closeButton"),ee(o,e.showCloseButton),o.setAttribute("aria-label",e.closeButtonAriaLabel||""))},$o=(t,e)=>{const o=_();o&&(Mo(o,e.backdrop),Oo(o,e.position),Do(o,e.grow),S(o,e,"container"))};function Mo(t,e){typeof e=="string"?t.style.background=e:e||h([document.documentElement,document.body],n["no-backdrop"])}function Oo(t,e){e&&(e in n?h(t,n[e]):(E('The "position" parameter is not valid, defaulting to "center"'),h(t,n.center)))}function Do(t,e){e&&h(t,n[`grow-${e}`])}var m={innerParams:new WeakMap,domCache:new WeakMap};const Fo=["input","file","range","select","radio","checkbox","textarea"],Ho=(t,e)=>{const o=u();if(!o)return;const s=m.innerParams.get(t),a=!s||e.input!==s.input;Fo.forEach(i=>{const r=M(o,n[i]);r&&(zo(i,e.inputAttributes),r.className=n[i],a&&b(r))}),e.input&&(a&&Ro(e),Uo(e))},Ro=t=>{if(!t.input)return;if(!p[t.input]){R(`Unexpected type of input! Expected ${Object.keys(p).join(" | ")}, got "${t.input}"`);return}const e=dt(t.input);if(!e)return;const o=p[t.input](e,t);w(e),t.inputAutoFocus&&setTimeout(()=>{rt(o)})},jo=t=>{for(let e=0;e<t.attributes.length;e++){const o=t.attributes[e].name;["id","type","value","style"].includes(o)||t.removeAttribute(o)}},zo=(t,e)=>{const o=u();if(!o)return;const s=ve(o,t);if(s){jo(s);for(const a in e)s.setAttribute(a,e[a])}},Uo=t=>{if(!t.input)return;const e=dt(t.input);e&&S(e,t,"input")},Re=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},te=(t,e,o)=>{if(o.inputLabel){const s=document.createElement("label"),a=n["input-label"];s.setAttribute("for",t.id),s.className=a,typeof o.customClass=="object"&&h(s,o.customClass.inputLabel),s.innerText=o.inputLabel,e.insertAdjacentElement("beforebegin",s)}},dt=t=>{const e=u();if(e)return M(e,n[t]||n.input)},ie=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Ie(e)||E(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},p={};p.text=p.email=p.password=p.number=p.tel=p.url=p.search=p.date=p["datetime-local"]=p.time=p.week=p.month=(t,e)=>(ie(t,e.inputValue),te(t,t,e),Re(t,e),t.type=e.input,t);p.file=(t,e)=>(te(t,t,e),Re(t,e),t);p.range=(t,e)=>{const o=t.querySelector("input"),s=t.querySelector("output");return ie(o,e.inputValue),o.type=e.input,ie(s,e.inputValue),te(o,t,e),t};p.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const o=document.createElement("option");B(o,e.inputPlaceholder),o.value="",o.disabled=!0,o.selected=!0,t.appendChild(o)}return te(t,t,e),t};p.radio=t=>(t.textContent="",t);p.checkbox=(t,e)=>{const o=ve(u(),"checkbox");o.value="1",o.checked=!!e.inputValue;const s=t.querySelector("span");return B(s,e.inputPlaceholder||e.inputLabel),o};p.textarea=(t,e)=>{ie(t,e.inputValue),Re(t,e),te(t,t,e);const o=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(u()).width),a=()=>{if(!document.body.contains(t))return;const i=t.offsetWidth+o(t);i>s?u().style.width=`${i}px`:F(u(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const qo=(t,e)=>{const o=Te();o&&(De(o),S(o,e,"htmlContainer"),e.html?(He(e.html,o),w(o,"block")):e.text?(o.textContent=e.text,w(o,"block")):b(o),Ho(t,e))},Vo=(t,e)=>{const o=nt();o&&(De(o),ee(o,e.footer,"block"),e.footer&&He(e.footer,o),S(o,e,"footer"))},No=(t,e)=>{const o=m.innerParams.get(t),s=W();if(!s)return;if(o&&e.icon===o.icon){Ge(s,e),We(s,e);return}if(!e.icon&&!e.iconHtml){b(s);return}if(e.icon&&Object.keys(ae).indexOf(e.icon)===-1){R(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),b(s);return}w(s),Ge(s,e),We(s,e),h(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ut)},We=(t,e)=>{for(const[o,s]of Object.entries(ae))e.icon!==o&&P(t,s);h(t,e.icon&&ae[e.icon]),Ko(t,e),ut(),S(t,e,"icon")},ut=()=>{const t=u();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),o=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<o.length;s++)o[s].style.backgroundColor=e},Wo=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Go=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Ge=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let o=t.innerHTML,s="";e.iconHtml?s=Ke(e.iconHtml):e.icon==="success"?(s=Wo,o=o.replace(/ style=".*?"/g,"")):e.icon==="error"?s=Go:e.icon&&(s=Ke({question:"?",warning:"!",info:"i"}[e.icon])),o.trim()!==s.trim()&&B(t,s)},Ko=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const o of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ne(t,o,"background-color",e.iconColor);Ne(t,".swal2-success-ring","border-color",e.iconColor)}},Ke=t=>`<div class="${n["icon-content"]}">${t}</div>`,Zo=(t,e)=>{const o=it();if(o){if(!e.imageUrl){b(o);return}w(o,""),o.setAttribute("src",e.imageUrl),o.setAttribute("alt",e.imageAlt||""),F(o,"width",e.imageWidth),F(o,"height",e.imageHeight),o.className=n.image,S(o,e,"image")}};let je=!1,ht=0,mt=0,pt=0,ft=0;const Yo=t=>{t.addEventListener("mousedown",ne),document.body.addEventListener("mousemove",re),t.addEventListener("mouseup",le),t.addEventListener("touchstart",ne),document.body.addEventListener("touchmove",re),t.addEventListener("touchend",le)},Jo=t=>{t.removeEventListener("mousedown",ne),document.body.removeEventListener("mousemove",re),t.removeEventListener("mouseup",le),t.removeEventListener("touchstart",ne),document.body.removeEventListener("touchmove",re),t.removeEventListener("touchend",le)},ne=t=>{const e=u();if(t.target===e||W().contains(t.target)){je=!0;const o=wt(t);ht=o.clientX,mt=o.clientY,pt=parseInt(e.style.insetInlineStart)||0,ft=parseInt(e.style.insetBlockStart)||0,h(e,"swal2-dragging")}},re=t=>{const e=u();if(je){let{clientX:o,clientY:s}=wt(t);e.style.insetInlineStart=`${pt+(o-ht)}px`,e.style.insetBlockStart=`${ft+(s-mt)}px`}},le=()=>{const t=u();je=!1,P(t,"swal2-dragging")},wt=t=>{let e=0,o=0;return t.type.startsWith("mouse")?(e=t.clientX,o=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,o=t.touches[0].clientY),{clientX:e,clientY:o}},Xo=(t,e)=>{const o=_(),s=u();if(!(!o||!s)){if(e.toast){F(o,"width",e.width),s.style.width="100%";const a=K();a&&s.insertBefore(a,W())}else F(s,"width",e.width);F(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),b(we()),Qo(s,e),e.draggable&&!e.toast?(h(s,n.draggable),Yo(s)):(P(s,n.draggable),Jo(s))}},Qo=(t,e)=>{const o=e.showClass||{};t.className=`${n.popup} ${C(t)?o.popup:""}`,e.toast?(h([document.documentElement,document.body],n["toast-shown"]),h(t,n.toast)):h(t,n.modal),S(t,e,"popup"),typeof e.customClass=="string"&&h(t,e.customClass),e.icon&&h(t,n[`icon-${e.icon}`])},es=(t,e)=>{const o=Ae();if(!o)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){b(o);return}w(o),o.textContent="",a>=s.length&&E("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((i,r)=>{const l=ts(i);if(o.appendChild(l),r===a&&h(l,n["active-progress-step"]),r!==s.length-1){const d=os(e);o.appendChild(d)}})},ts=t=>{const e=document.createElement("li");return h(e,n["progress-step"]),B(e,t),e},os=t=>{const e=document.createElement("li");return h(e,n["progress-step-line"]),t.progressStepsDistance&&F(e,"width",t.progressStepsDistance),e},ss=(t,e)=>{const o=at();o&&(De(o),ee(o,e.title||e.titleText,"block"),e.title&&He(e.title,o),e.titleText&&(o.innerText=e.titleText),S(o,e,"title"))},gt=(t,e)=>{Xo(t,e),$o(t,e),es(t,e),No(t,e),Zo(t,e),ss(t,e),Ao(t,e),qo(t,e),Po(t,e),Vo(t,e);const o=u();typeof e.didRender=="function"&&o&&e.didRender(o),c.eventEmitter.emit("didRender",o)},as=()=>C(u()),bt=()=>{var t;return(t=A())===null||t===void 0?void 0:t.click()},is=()=>{var t;return(t=j())===null||t===void 0?void 0:t.click()},ns=()=>{var t;return(t=G())===null||t===void 0?void 0:t.click()},Z=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),vt=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},rs=(t,e,o)=>{vt(t),e.toast||(t.keydownHandler=s=>cs(e,s,o),t.keydownTarget=e.keydownListenerCapture?window:u(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Se=(t,e)=>{var o;const s=Me();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(o=u())===null||o===void 0||o.focus()},yt=["ArrowRight","ArrowDown"],ls=["ArrowLeft","ArrowUp"],cs=(t,e,o)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?ds(e,t):e.key==="Tab"?us(e):[...yt,...ls].includes(e.key)?hs(e.key):e.key==="Escape"&&ms(e,t,o)))},ds=(t,e)=>{if(!fe(e.allowEnterKey))return;const o=ve(u(),e.input);if(t.target&&o&&t.target instanceof HTMLElement&&t.target.outerHTML===o.outerHTML){if(["textarea","file"].includes(e.input))return;bt(),t.preventDefault()}},us=t=>{const e=t.target,o=Me();let s=-1;for(let a=0;a<o.length;a++)if(e===o[a]){s=a;break}t.shiftKey?Se(s,-1):Se(s,1),t.stopPropagation(),t.preventDefault()},hs=t=>{const e=Q(),o=A(),s=j(),a=G();if(!e||!o||!s||!a)return;const i=[o,s,a];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const r=yt.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let d=0;d<e.children.length;d++){if(l=l[r],!l)return;if(l instanceof HTMLButtonElement&&C(l))break}l instanceof HTMLButtonElement&&l.focus()}},ms=(t,e,o)=>{fe(e.allowEscapeKey)&&(t.preventDefault(),o(Z.esc))};var V={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ps=()=>{const t=_();Array.from(document.body.children).forEach(o=>{o.contains(t)||(o.hasAttribute("aria-hidden")&&o.setAttribute("data-previous-aria-hidden",o.getAttribute("aria-hidden")||""),o.setAttribute("aria-hidden","true"))})},kt=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Et=typeof window<"u"&&!!window.GestureEvent,fs=()=>{if(Et&&!$(document.body,n.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,h(document.body,n.iosfix),ws()}},ws=()=>{const t=_();if(!t)return;let e;t.ontouchstart=o=>{e=gs(o)},t.ontouchmove=o=>{e&&(o.preventDefault(),o.stopPropagation())}},gs=t=>{const e=t.target,o=_(),s=Te();return!o||!s||bs(t)||vs(t)?!1:e===o||!Ce(o)&&e instanceof HTMLElement&&!go(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Ce(s)&&s.contains(e))},bs=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",vs=t=>t.touches&&t.touches.length>1,ys=()=>{if($(document.body,n.iosfix)){const t=parseInt(document.body.style.top,10);P(document.body,n.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},ks=()=>{const t=document.createElement("div");t.className=n["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let U=null;const Es=t=>{U===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(U=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${U+ks()}px`)},Ls=()=>{U!==null&&(document.body.style.paddingRight=`${U}px`,U=null)};function Lt(t,e,o,s){be()?Ze(t,s):(no(o).then(()=>Ze(t,s)),vt(c)),Et?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Oe()&&(Ls(),ys(),kt()),_s()}function _s(){P([document.documentElement,document.body],[n.shown,n["height-auto"],n["no-backdrop"],n["toast-shown"]])}function O(t){t=Ss(t);const e=V.swalPromiseResolve.get(this),o=Cs(this);this.isAwaitingPromise?t.isDismissed||(oe(this),e(t)):o&&e(t)}const Cs=t=>{const e=u();if(!e)return!1;const o=m.innerParams.get(t);if(!o||$(e,o.hideClass.popup))return!1;P(e,o.showClass.popup),h(e,o.hideClass.popup);const s=_();return P(s,o.showClass.backdrop),h(s,o.hideClass.backdrop),xs(t,e,o),!0};function _t(t){const e=V.swalPromiseReject.get(this);oe(this),e&&e(t)}const oe=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,m.innerParams.get(t)||t._destroy())},Ss=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),xs=(t,e,o)=>{var s;const a=_(),i=ct(e);typeof o.willClose=="function"&&o.willClose(e),(s=c.eventEmitter)===null||s===void 0||s.emit("willClose",e),i?Bs(t,e,a,o.returnFocus,o.didClose):Lt(t,a,o.returnFocus,o.didClose)},Bs=(t,e,o,s,a)=>{c.swalCloseEventFinishedCallback=Lt.bind(null,t,o,s,a);const i=function(r){if(r.target===e){var l;(l=c.swalCloseEventFinishedCallback)===null||l===void 0||l.call(c),delete c.swalCloseEventFinishedCallback,e.removeEventListener("animationend",i),e.removeEventListener("transitionend",i)}};e.addEventListener("animationend",i),e.addEventListener("transitionend",i)},Ze=(t,e)=>{setTimeout(()=>{var o;typeof e=="function"&&e.bind(t.params)(),(o=c.eventEmitter)===null||o===void 0||o.emit("didClose"),t._destroy&&t._destroy()})},N=t=>{let e=u();if(e||new me,e=u(),!e)return;const o=K();be()?b(W()):Ps(e,t),w(o),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Ps=(t,e)=>{const o=Q(),s=K();!o||!s||(!e&&C(A())&&(e=A()),w(o),e&&(b(e),s.setAttribute("data-button-to-replace",e.className),o.insertBefore(s,e)),h([t,o],n.loading))},Is=(t,e)=>{e.input==="select"||e.input==="radio"?Os(t,e):["text","email","number","tel","textarea"].some(o=>o===e.input)&&(Pe(e.inputValue)||Ie(e.inputValue))&&(N(A()),Ds(t,e))},Ts=(t,e)=>{const o=t.getInput();if(!o)return null;switch(e.input){case"checkbox":return As(o);case"radio":return $s(o);case"file":return Ms(o);default:return e.inputAutoTrim?o.value.trim():o.value}},As=t=>t.checked?1:0,$s=t=>t.checked?t.value:null,Ms=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,Os=(t,e)=>{const o=u();if(!o)return;const s=a=>{e.input==="select"?Fs(o,ce(a),e):e.input==="radio"&&Hs(o,ce(a),e)};Pe(e.inputOptions)||Ie(e.inputOptions)?(N(A()),J(e.inputOptions).then(a=>{t.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):R(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},Ds=(t,e)=>{const o=t.getInput();o&&(b(o),J(e.inputValue).then(s=>{o.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,w(o),o.focus(),t.hideLoading()}).catch(s=>{R(`Error in inputValue promise: ${s}`),o.value="",w(o),o.focus(),t.hideLoading()}))};function Fs(t,e,o){const s=M(t,n.select);if(!s)return;const a=(i,r,l)=>{const d=document.createElement("option");d.value=l,B(d,r),d.selected=Ct(l,o.inputValue),i.appendChild(d)};e.forEach(i=>{const r=i[0],l=i[1];if(Array.isArray(l)){const d=document.createElement("optgroup");d.label=r,d.disabled=!1,s.appendChild(d),l.forEach(g=>a(d,g[1],g[0]))}else a(s,l,r)}),s.focus()}function Hs(t,e,o){const s=M(t,n.radio);if(!s)return;e.forEach(i=>{const r=i[0],l=i[1],d=document.createElement("input"),g=document.createElement("label");d.type="radio",d.name=n.radio,d.value=r,Ct(r,o.inputValue)&&(d.checked=!0);const v=document.createElement("span");B(v,l),v.className=n.label,g.appendChild(d),g.appendChild(v),s.appendChild(g)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const ce=t=>{const e=[];return t instanceof Map?t.forEach((o,s)=>{let a=o;typeof a=="object"&&(a=ce(a)),e.push([s,a])}):Object.keys(t).forEach(o=>{let s=t[o];typeof s=="object"&&(s=ce(s)),e.push([o,s])}),e},Ct=(t,e)=>!!e&&e.toString()===t.toString(),Rs=t=>{const e=m.innerParams.get(t);t.disableButtons(),e.input?St(t,"confirm"):Ue(t,!0)},js=t=>{const e=m.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?St(t,"deny"):ze(t,!1)},zs=(t,e)=>{t.disableButtons(),e(Z.cancel)},St=(t,e)=>{const o=m.innerParams.get(t);if(!o.input){R(`The "input" parameter is needed to be set when using returnInputValueOn${Be(e)}`);return}const s=t.getInput(),a=Ts(t,o);o.inputValidator?Us(t,a,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(o.validationMessage||s.validationMessage)):e==="deny"?ze(t,a):Ue(t,a)},Us=(t,e,o)=>{const s=m.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>J(s.inputValidator(e,s.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):o==="deny"?ze(t,e):Ue(t,e)})},ze=(t,e)=>{const o=m.innerParams.get(t||void 0);o.showLoaderOnDeny&&N(j()),o.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>J(o.preDeny(e,o.validationMessage))).then(a=>{a===!1?(t.hideLoading(),oe(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>xt(t||void 0,a))):t.close({isDenied:!0,value:e})},Ye=(t,e)=>{t.close({isConfirmed:!0,value:e})},xt=(t,e)=>{t.rejectPromise(e)},Ue=(t,e)=>{const o=m.innerParams.get(t||void 0);o.showLoaderOnConfirm&&N(),o.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>J(o.preConfirm(e,o.validationMessage))).then(a=>{C(we())||a===!1?(t.hideLoading(),oe(t)):Ye(t,typeof a>"u"?e:a)}).catch(a=>xt(t||void 0,a))):Ye(t,e)};function de(){const t=m.innerParams.get(this);if(!t)return;const e=m.domCache.get(this);b(e.loader),be()?t.icon&&w(W()):qs(e),P([e.popup,e.actions],n.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const qs=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?w(e[0],"inline-block"):wo()&&b(t.actions)};function Bt(){const t=m.innerParams.get(this),e=m.domCache.get(this);return e?ve(e.popup,t.input):null}function Pt(t,e,o){const s=m.domCache.get(t);e.forEach(a=>{s[a].disabled=o})}function It(t,e){const o=u();if(!(!o||!t))if(t.type==="radio"){const s=o.querySelectorAll(`[name="${n.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else t.disabled=e}function Tt(){Pt(this,["confirmButton","denyButton","cancelButton"],!1)}function At(){Pt(this,["confirmButton","denyButton","cancelButton"],!0)}function $t(){It(this.getInput(),!1)}function Mt(){It(this.getInput(),!0)}function Ot(t){const e=m.domCache.get(this),o=m.innerParams.get(this);B(e.validationMessage,t),e.validationMessage.className=n["validation-message"],o.customClass&&o.customClass.validationMessage&&h(e.validationMessage,o.customClass.validationMessage),w(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",n["validation-message"]),rt(s),h(s,n.inputerror))}function Dt(){const t=m.domCache.get(this);t.validationMessage&&b(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),P(e,n.inputerror))}const q={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Vs=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Ns={allowEnterKey:void 0},Ws=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ft=t=>Object.prototype.hasOwnProperty.call(q,t),Ht=t=>Vs.indexOf(t)!==-1,Rt=t=>Ns[t],Gs=t=>{Ft(t)||E(`Unknown parameter "${t}"`)},Ks=t=>{Ws.includes(t)&&E(`The parameter "${t}" is incompatible with toasts`)},Zs=t=>{const e=Rt(t);e&&st(t,e)},jt=t=>{t.backdrop===!1&&t.allowOutsideClick&&E('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&E(`Invalid theme "${t.theme}"`);for(const e in t)Gs(e),t.toast&&Ks(e),Zs(e)};function zt(t){const e=_(),o=u(),s=m.innerParams.get(this);if(!o||$(o,s.hideClass.popup)){E("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=Ys(t),i=Object.assign({},s,a);jt(i),e.dataset.swal2Theme=i.theme,gt(this,i),m.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const Ys=t=>{const e={};return Object.keys(t).forEach(o=>{Ht(o)?e[o]=t[o]:E(`Invalid parameter to update: ${o}`)}),e};function Ut(){const t=m.domCache.get(this),e=m.innerParams.get(this);if(!e){qt(this);return}t.popup&&c.swalCloseEventFinishedCallback&&(c.swalCloseEventFinishedCallback(),delete c.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),c.eventEmitter.emit("didDestroy"),Js(this)}const Js=t=>{qt(t),delete t.params,delete c.keydownHandler,delete c.keydownTarget,delete c.currentInstance},qt=t=>{t.isAwaitingPromise?(Ee(m,t),t.isAwaitingPromise=!0):(Ee(V,t),Ee(m,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Ee=(t,e)=>{for(const o in t)t[o].delete(e)};var Xs=Object.freeze({__proto__:null,_destroy:Ut,close:O,closeModal:O,closePopup:O,closeToast:O,disableButtons:At,disableInput:Mt,disableLoading:de,enableButtons:Tt,enableInput:$t,getInput:Bt,handleAwaitingPromise:oe,hideLoading:de,rejectPromise:_t,resetValidationMessage:Dt,showValidationMessage:Ot,update:zt});const Qs=(t,e,o)=>{t.toast?ea(t,e,o):(oa(e),sa(e),aa(t,e,o))},ea=(t,e,o)=>{e.popup.onclick=()=>{t&&(ta(t)||t.timer||t.input)||o(Z.close)}},ta=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let ue=!1;const oa=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(ue=!0)}}},sa=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(o){t.popup.onmouseup=()=>{},(o.target===t.popup||o.target instanceof HTMLElement&&t.popup.contains(o.target))&&(ue=!0)}}},aa=(t,e,o)=>{e.container.onclick=s=>{if(ue){ue=!1;return}s.target===e.container&&fe(t.allowOutsideClick)&&o(Z.backdrop)}},ia=t=>typeof t=="object"&&t.jquery,Je=t=>t instanceof Element||ia(t),na=t=>{const e={};return typeof t[0]=="object"&&!Je(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((o,s)=>{const a=t[s];typeof a=="string"||Je(a)?e[o]=a:a!==void 0&&R(`Unexpected type of ${o}! Expected "string" or "Element", got ${typeof a}`)}),e};function ra(...t){return new this(...t)}function la(t){class e extends this{_main(s,a){return super._main(s,Object.assign({},t,a))}}return e}const ca=()=>c.timeout&&c.timeout.getTimerLeft(),Vt=()=>{if(c.timeout)return bo(),c.timeout.stop()},Nt=()=>{if(c.timeout){const t=c.timeout.start();return Fe(t),t}},da=()=>{const t=c.timeout;return t&&(t.running?Vt():Nt())},ua=t=>{if(c.timeout){const e=c.timeout.increase(t);return Fe(e,!0),e}},ha=()=>!!(c.timeout&&c.timeout.isRunning());let Xe=!1;const xe={};function ma(t="data-swal-template"){xe[t]=this,Xe||(document.body.addEventListener("click",pa),Xe=!0)}const pa=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const o in xe){const s=e.getAttribute(o);if(s){xe[o].fire({template:s});return}}};class fa{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,o){const s=this._getHandlersByEventName(e);s.includes(o)||s.push(o)}once(e,o){const s=(...a)=>{this.removeListener(e,s),o.apply(this,a)};this.on(e,s)}emit(e,...o){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,o)}catch(a){console.error(a)}})}removeListener(e,o){const s=this._getHandlersByEventName(e),a=s.indexOf(o);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}c.eventEmitter=new fa;const wa=(t,e)=>{c.eventEmitter.on(t,e)},ga=(t,e)=>{c.eventEmitter.once(t,e)},ba=(t,e)=>{if(!t){c.eventEmitter.reset();return}e?c.eventEmitter.removeListener(t,e):c.eventEmitter.removeAllListeners(t)};var va=Object.freeze({__proto__:null,argsToParams:na,bindClickHandler:ma,clickCancel:ns,clickConfirm:bt,clickDeny:is,enableLoading:N,fire:ra,getActions:Q,getCancelButton:G,getCloseButton:$e,getConfirmButton:A,getContainer:_,getDenyButton:j,getFocusableElements:Me,getFooter:nt,getHtmlContainer:Te,getIcon:W,getIconContent:uo,getImage:it,getInputLabel:ho,getLoader:K,getPopup:u,getProgressSteps:Ae,getTimerLeft:ca,getTimerProgressBar:ge,getTitle:at,getValidationMessage:we,increaseTimer:ua,isDeprecatedParameter:Rt,isLoading:po,isTimerRunning:ha,isUpdatableParameter:Ht,isValidParameter:Ft,isVisible:as,mixin:la,off:ba,on:wa,once:ga,resumeTimer:Nt,showLoading:N,stopTimer:Vt,toggleTimer:da});class ya{constructor(e,o){this.callback=e,this.remaining=o,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const o=this.running;return o&&this.stop(),this.remaining+=e,o&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Wt=["swal-title","swal-html","swal-footer"],ka=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const o=e.content;return Pa(o),Object.assign(Ea(o),La(o),_a(o),Ca(o),Sa(o),xa(o),Ba(o,Wt))},Ea=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{H(s,["name","value"]);const a=s.getAttribute("name"),i=s.getAttribute("value");!a||!i||(typeof q[a]=="boolean"?e[a]=i!=="false":typeof q[a]=="object"?e[a]=JSON.parse(i):e[a]=i)}),e},La=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),i=s.getAttribute("value");!a||!i||(e[a]=new Function(`return ${i}`)())}),e},_a=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{H(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${Be(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},Ca=t=>{const e={},o=t.querySelector("swal-image");return o&&(H(o,["src","width","height","alt"]),o.hasAttribute("src")&&(e.imageUrl=o.getAttribute("src")||void 0),o.hasAttribute("width")&&(e.imageWidth=o.getAttribute("width")||void 0),o.hasAttribute("height")&&(e.imageHeight=o.getAttribute("height")||void 0),o.hasAttribute("alt")&&(e.imageAlt=o.getAttribute("alt")||void 0)),e},Sa=t=>{const e={},o=t.querySelector("swal-icon");return o&&(H(o,["type","color"]),o.hasAttribute("type")&&(e.icon=o.getAttribute("type")),o.hasAttribute("color")&&(e.iconColor=o.getAttribute("color")),e.iconHtml=o.innerHTML),e},xa=t=>{const e={},o=t.querySelector("swal-input");o&&(H(o,["type","label","placeholder","value"]),e.input=o.getAttribute("type")||"text",o.hasAttribute("label")&&(e.inputLabel=o.getAttribute("label")),o.hasAttribute("placeholder")&&(e.inputPlaceholder=o.getAttribute("placeholder")),o.hasAttribute("value")&&(e.inputValue=o.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{H(a,["value"]);const i=a.getAttribute("value");if(!i)return;const r=a.innerHTML;e.inputOptions[i]=r})),e},Ba=(t,e)=>{const o={};for(const s in e){const a=e[s],i=t.querySelector(a);i&&(H(i,[]),o[a.replace(/^swal-/,"")]=i.innerHTML.trim())}return o},Pa=t=>{const e=Wt.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(o=>{const s=o.tagName.toLowerCase();e.includes(s)||E(`Unrecognized element <${s}>`)})},H=(t,e)=>{Array.from(t.attributes).forEach(o=>{e.indexOf(o.name)===-1&&E([`Unrecognized attribute "${o.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},Gt=10,Ia=t=>{const e=_(),o=u();typeof t.willOpen=="function"&&t.willOpen(o),c.eventEmitter.emit("willOpen",o);const a=window.getComputedStyle(document.body).overflowY;$a(e,o,t),setTimeout(()=>{Ta(e,o)},Gt),Oe()&&(Aa(e,t.scrollbarPadding,a),ps()),!be()&&!c.previousActiveElement&&(c.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(o)),c.eventEmitter.emit("didOpen",o),P(e,n["no-transition"])},he=t=>{const e=u();if(t.target!==e)return;const o=_();e.removeEventListener("animationend",he),e.removeEventListener("transitionend",he),o.style.overflowY="auto"},Ta=(t,e)=>{ct(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",he),e.addEventListener("transitionend",he)):t.style.overflowY="auto"},Aa=(t,e,o)=>{fs(),e&&o!=="hidden"&&Es(o),setTimeout(()=>{t.scrollTop=0})},$a=(t,e,o)=>{h(t,o.showClass.backdrop),o.animation?(e.style.setProperty("opacity","0","important"),w(e,"grid"),setTimeout(()=>{h(e,o.showClass.popup),e.style.removeProperty("opacity")},Gt)):w(e,"grid"),h([document.documentElement,document.body],n.shown),o.heightAuto&&o.backdrop&&!o.toast&&h([document.documentElement,document.body],n["height-auto"])};var Qe={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function Ma(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Qe.email),t.input==="url"&&(t.inputValidator=Qe.url))}function Oa(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(E('Target parameter is not valid, defaulting to "body"'),t.target="body")}function Da(t){Ma(t),t.showLoaderOnConfirm&&!t.preConfirm&&E(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Oa(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),So(t)}let T;var se=new WeakMap;class f{constructor(...e){if(oo(this,se,void 0),typeof window>"u")return;T=this;const o=Object.freeze(this.constructor.argsToParams(e));this.params=o,this.isAwaitingPromise=!1,so(se,this,this._main(T.params))}_main(e,o={}){if(jt(Object.assign({},o,e)),c.currentInstance){const i=V.swalPromiseResolve.get(c.currentInstance),{isAwaitingPromise:r}=c.currentInstance;c.currentInstance._destroy(),r||i({isDismissed:!0}),Oe()&&kt()}c.currentInstance=T;const s=Ha(e,o);Da(s),Object.freeze(s),c.timeout&&(c.timeout.stop(),delete c.timeout),clearTimeout(c.restoreFocusTimeout);const a=Ra(T);return gt(T,s),m.innerParams.set(T,s),Fa(T,a,s)}then(e){return qe(se,this).then(e)}finally(e){return qe(se,this).finally(e)}}const Fa=(t,e,o)=>new Promise((s,a)=>{const i=r=>{t.close({isDismissed:!0,dismiss:r})};V.swalPromiseResolve.set(t,s),V.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{Rs(t)},e.denyButton.onclick=()=>{js(t)},e.cancelButton.onclick=()=>{zs(t,i)},e.closeButton.onclick=()=>{i(Z.close)},Qs(o,e,i),rs(c,o,i),Is(t,o),Ia(o),ja(c,o,i),za(e,o),setTimeout(()=>{e.container.scrollTop=0})}),Ha=(t,e)=>{const o=ka(t),s=Object.assign({},q,e,o,t);return s.showClass=Object.assign({},q.showClass,s.showClass),s.hideClass=Object.assign({},q.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},Ra=t=>{const e={popup:u(),container:_(),actions:Q(),confirmButton:A(),denyButton:j(),cancelButton:G(),loader:K(),closeButton:$e(),validationMessage:we(),progressSteps:Ae()};return m.domCache.set(t,e),e},ja=(t,e,o)=>{const s=ge();b(s),e.timer&&(t.timeout=new ya(()=>{o("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(w(s),S(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Fe(e.timer)})))},za=(t,e)=>{if(!e.toast){if(!fe(e.allowEnterKey)){st("allowEnterKey"),Va();return}Ua(t)||qa(t,e)||Se(-1,1)}},Ua=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const o of e)if(o instanceof HTMLElement&&C(o))return o.focus(),!0;return!1},qa=(t,e)=>e.focusDeny&&C(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&C(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&C(t.confirmButton)?(t.confirmButton.focus(),!0):!1,Va=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const o=document.createElement("audio");o.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",o.loop=!0,document.body.appendChild(o),setTimeout(()=>{o.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}f.prototype.disableButtons=At;f.prototype.enableButtons=Tt;f.prototype.getInput=Bt;f.prototype.disableInput=Mt;f.prototype.enableInput=$t;f.prototype.hideLoading=de;f.prototype.disableLoading=de;f.prototype.showValidationMessage=Ot;f.prototype.resetValidationMessage=Dt;f.prototype.close=O;f.prototype.closePopup=O;f.prototype.closeModal=O;f.prototype.closeToast=O;f.prototype.rejectPromise=_t;f.prototype.update=zt;f.prototype._destroy=Ut;Object.assign(f,va);Object.keys(Xs).forEach(t=>{f[t]=function(...e){return T&&T[t]?T[t](...e):null}});f.DismissReason=Z;f.version="11.22.0";const me=f;me.default=me;typeof document<"u"&&function(t,e){var o=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(o),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=e);else try{o.innerHTML=e}catch{o.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function Na({story:t,isFavorite:e}){const o=t.name?t.name.charAt(0).toUpperCase():"?";return`
    <article class="story-card" data-id="${t.id}">
      <div class="story-image-container">
        <img 
          src="${t.photoUrl}" 
          alt="Cerita dari ${t.name}" 
          class="story-image"
          loading="lazy"
          onerror="this.src='/fallback.jpg';"
        />
        <button class="favorite-btn${e?" favorited":""}" data-id="${t.id}" aria-label="${e?"Hapus dari favorit":"Tambah ke favorit"}" title="${e?"Hapus dari favorit":"Tambah ke favorit"}">
          <i class="fa-${e?"solid":"regular"} fa-bookmark"></i>
        </button>
      </div>
      <div class="story-content">
        <div class="user-info">
          <div class="user-avatar">${o}</div>
          <span class="user-name">${t.name}</span>
        </div>
        <h3 class="story-title">${t.name}</h3>
        <p class="story-description">${t.description}</p>
        <div class="story-meta">
          <div class="story-info">
            <i class="fas fa-calendar-alt"></i>
            <span>${new Date(t.createdAt).toLocaleDateString("id-ID")}</span>
          </div>
          ${t.lat&&t.lon?`
            <div class="story-info">
              <i class="fas fa-map-marker-alt"></i>
              <span>Lokasi tersedia</span>
            </div>
          `:""}
        </div>
        ${t.lat&&t.lon?`
          <div class="story-minimap" id="minimap-${t.id}" style="height:120px;border-radius:8px;overflow:hidden;margin-bottom:8px;"></div>
        `:""}
        <div class="story-actions">
          <a href="#" class="view-details-btn" data-id="${t.id}" aria-label="Lihat detail cerita">Lihat Detail</a>
        </div>
      </div>
    </article>
  `}function Wa(t){t.lat&&t.lon&&window.L&&setTimeout(()=>{const e=L.map(`minimap-${t.id}`,{center:[t.lat,t.lon],zoom:13,attributionControl:!1,zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1,tap:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(e),L.marker([t.lat,t.lon]).addTo(e)},0)}function Le(t,e){me.fire({toast:!0,position:"top-end",icon:t?"success":"error",title:t?e?"Ditambahkan ke favorit!":"Dihapus dari favorit!":"Gagal mengubah favorit",showConfirmButton:!1,timer:1800,timerProgressBar:!0})}const I=9;class Ga{constructor(){this._model=new pe,this._presenter=null,this._showFavorites=!1,this._title="StoryApp",this._currentPage=1,this._totalPages=1,this._searchValue=""}async render(){return y.isLoggedIn()?(document.title=this._title,`
      <section class="home-page page-transition">
        <div class="hero-banner">
          <div class="hero-content">
            <h1>Temukan Cerita Menarik</h1>
            <p>Bagikan pengalaman dan baca cerita dari komunitas kami</p>
            <div class="search-bar">
              <input type="text" id="search-input" placeholder="Cari cerita..." value="${this._searchValue}" class="form-input" />
              <button id="search-btn" aria-label="Cari"><i class="fas fa-search"></i></button>
            </div>
          </div>
        </div>
        <div class="content-container">
          <div class="content-header">
            <h2>${this._showFavorites?"Cerita Favorit":"Cerita Terbaru"}</h2>
            <div class="view-controls">
              <button 
                id="toggle-favorites" 
                class="btn btn-icon${this._showFavorites?" active":""}" 
                aria-pressed="${this._showFavorites}">
                <i class="fas fa-${this._showFavorites?"globe":"bookmark"}"></i>
                ${this._showFavorites?"Lihat Semua":"Favorit Saya"}
              </button>
              ${y.isLoggedIn()?`
                <a href="#/add" class="btn btn-primary">
                  <i class="fas fa-plus"></i> Cerita Baru
                </a>
              `:""}
            </div>
          </div>
          <div id="stories-container" class="stories-grid">
            <app-loader id="stories-loader"></app-loader>
          </div>
          <div id="error-container" class="error-container hidden"></div>
          <div id="pagination-container" class="pagination-container">
            <div class="pagination">
              <button class="btn" id="prev-page" ${this._currentPage<=1?"disabled":""}>Prev</button>
              <span>Halaman ${this._currentPage} dari ${this._totalPages}</span>
              <button class="btn" id="next-page" ${this._currentPage>=this._totalPages?"disabled":""}>Next</button>
            </div>
          </div>
        </div>
      </section>
    `):(window.location.href="#/login","")}async afterRender(){y.isLoggedIn()&&(this._renderSidebarAndFooter(),window.app&&typeof window.app._checkAuthStatus=="function"&&window.app._checkAuthStatus(),this._presenter=new Jt(this._model,this),this._bindUIEvents(),await this._refreshContent())}_renderSidebarAndFooter(){const e=y.getUserData(),o=document.getElementById("navbar-container");o&&(o.innerHTML=Xt({user:e?e.name:""})),Qt();const s=document.getElementById("footer-container");s&&(s.innerHTML=eo())}_bindUIEvents(){var o,s,a,i;const e=document.getElementById("toggle-favorites");e==null||e.addEventListener("click",()=>{this._showFavorites=!this._showFavorites,this._currentPage=1,e.innerHTML=this._showFavorites?'<i class="fas fa-globe"></i> Lihat Semua':'<i class="fas fa-bookmark"></i> Favorit Saya',e.classList.toggle("active",this._showFavorites),e.setAttribute("aria-pressed",this._showFavorites?"true":"false"),this._refreshContent()}),(o=document.getElementById("search-input"))==null||o.addEventListener("input",r=>{this._searchValue=r.target.value,this._currentPage=1,this._refreshContent()}),(s=document.getElementById("search-btn"))==null||s.addEventListener("click",()=>{this._currentPage=1,this._refreshContent()}),(a=document.getElementById("prev-page"))==null||a.addEventListener("click",()=>{this._currentPage>1&&(this._currentPage--,this._refreshContent())}),(i=document.getElementById("next-page"))==null||i.addEventListener("click",()=>{this._currentPage<this._totalPages&&(this._currentPage++,this._refreshContent())})}async _refreshContent(){this.showLoading();let e=[],o=0;if(this._showFavorites){const s=await k.getFavorites();let a=s;if(this._searchValue){const l=this._searchValue.toLowerCase();a=s.filter(d=>d.name.toLowerCase().includes(l)||d.description.toLowerCase().includes(l))}o=a.length,this._totalPages=Math.max(1,Math.ceil(o/I)),this._currentPage>this._totalPages&&(this._currentPage=this._totalPages);const i=(this._currentPage-1)*I,r=i+I;e=a.slice(i,r)}else if(this._searchValue){let s=[],a=1,i=!0;for(;i&&a<=10;){const v=await this._model.getStories(a,I,0);s=s.concat(v),v.length<I&&(i=!1),a++}const r=this._searchValue.toLowerCase(),l=s.filter(v=>v.name.toLowerCase().includes(r)||v.description.toLowerCase().includes(r));o=l.length,this._totalPages=Math.max(1,Math.ceil(o/I)),this._currentPage>this._totalPages&&(this._currentPage=this._totalPages);const d=(this._currentPage-1)*I,g=d+I;e=l.slice(d,g)}else try{e=await this._model.getStories(this._currentPage,I,0),this._totalPages=e.length<I&&this._currentPage>1?this._currentPage:this._currentPage+1,e.length<I&&(this._totalPages=this._currentPage)}catch{this.showError("Gagal memuat cerita"),this.hideLoading();return}await this.renderStories(e),this._updatePagination()}showLoading(){const e=document.getElementById("stories-loader");e&&e.show("Memuat cerita...");const o=document.getElementById("error-container");o&&o.classList.add("hidden");const s=document.getElementById("stories-container");s&&[...s.children].forEach(a=>{a.id!=="stories-loader"&&a.remove()})}hideLoading(){const e=document.getElementById("stories-loader");e&&e.hide()}async renderStories(e){this.hideLoading();const o=document.getElementById("stories-container");if(o){if(e.length===0){o.innerHTML=`
        <div class="empty-state">
          <i class="fas fa-${this._showFavorites?"bookmark":"book-open"}"></i>
          <h3>${this._showFavorites?"Belum ada cerita favorit":"Belum ada cerita"}</h3>
          ${this._showFavorites?`
            <p>Tambahkan cerita ke favorit untuk melihatnya di sini</p>
            <a href="#/" class="btn">Jelajahi Cerita</a>
          `:`
            <p>Jadilah yang pertama membagikan cerita</p>
            ${y.isLoggedIn()?`
              <a href="#/add" class="btn btn-primary">Buat Cerita</a>
            `:`
              <a href="#/login" class="btn btn-primary">Login untuk Membuat Cerita</a>
            `}
          `}
        </div>
      `;return}o.innerHTML="";for(const s of e){const a=await k.isFavorite(s.id);o.innerHTML+=Na({story:s,isFavorite:a})}e.forEach(s=>{s.lat&&s.lon&&Wa(s)}),e.forEach(s=>{var i;const a=(i=o.querySelector(`[data-id="${s.id}"]`))==null?void 0:i.closest(".story-card");a&&(a.querySelector(".view-details-btn").addEventListener("click",r=>{r.preventDefault(),window.selectedStoryId=s.id,window.location.href="#/detail"}),a.querySelector(".favorite-btn").addEventListener("click",async r=>{r.preventDefault();try{const l=await k.isFavorite(s.id),d=a.querySelector(".favorite-btn i");l?(await k.removeFromFavorites(s.id),a.querySelector(".favorite-btn").classList.remove("favorited"),d.classList.replace("fa-solid","fa-regular"),Le(!0,!1)):(await k.addToFavorites(s),a.querySelector(".favorite-btn").classList.add("favorited"),d.classList.replace("fa-regular","fa-solid"),Le(!0,!0)),this._showFavorites&&this._refreshContent()}catch{Le(!1,!1)}}))})}}_updatePagination(){const e=document.getElementById("prev-page"),o=document.getElementById("next-page"),s=document.querySelector(".pagination span");s&&(s.textContent=`Halaman ${this._currentPage} dari ${this._totalPages}`),e&&(e.disabled=this._currentPage<=1),o&&(this._showFavorites?o.disabled=this._currentPage>=this._totalPages:o.disabled=this._totalPages===this._currentPage)}}class Ka extends HTMLElement{constructor(){super(),this.message="Loading...",this._timeout=null,this._isVisible=!1}static get observedAttributes(){return["message"]}attributeChangedCallback(e,o,s){e==="message"&&o!==s&&(this.message=s,this.renderMessage())}connectedCallback(){this.render(),this.hide()}show(e="",o=0){e&&(this.message=e,this.renderMessage()),this.style.display="flex",this._isVisible=!0,this.setAttribute("aria-busy","true"),o>0&&(clearTimeout(this._timeout),this._timeout=setTimeout(()=>this.hide(),o))}hide(){this.style.display="none",this._isVisible=!1,this.setAttribute("aria-busy","false"),clearTimeout(this._timeout)}render(){this.innerHTML=`
      <div class="loading-spinner" aria-live="polite" aria-busy="true">
        <div class="spinner"></div>
        <p class="loading-message">${this.message}</p>
      </div>
    `,this.style.display="none",this.style.justifyContent="center",this.style.alignItems="center",this.style.width="100%",this.style.minHeight="120px",this.style.background="rgba(255,255,255,0.85)",this.style.position="relative",this.style.zIndex="100"}renderMessage(){const e=this.querySelector(".loading-message");e&&(e.textContent=this.message)}}customElements.define("app-loader",Ka);class Za{async render(){return document.title="About - Dicoding Story",`
      <app-sidebar></app-sidebar>
      <app-header></app-header>
      <main id="main-content" class="main-content page-transition" tabindex="-1">
        <section class="about-page-container">
          <div class="about-header-card">
            <h1 class="about-title">
              <i class="fas fa-info-circle"></i>
              Tentang Aplikasi
            </h1>
            <p class="about-subtitle">
              Platform berbagi pengalaman belajar dan cerita teknologi untuk komunitas developer Indonesia.
            </p>
          </div>
          <div class="about-content-grid">
            <div class="about-card">
              <h2><i class="fas fa-book-open"></i> Dicoding Story</h2>
              <p>
                <strong>Dicoding Story</strong> adalah platform untuk berbagi pengalaman belajar, menulis cerita, dan menjelajah kisah dari pengguna lain.
              </p>
              <p>
                Aplikasi ini dibuat sebagai submission kelas <em>Menjadi Front-End Web Developer Expert</em> Dicoding.
              </p>
            </div>
            <div class="about-card">
              <h2><i class="fas fa-feather-alt"></i> Fitur</h2>
              <ul class="feature-list">
                <li><i class="fas fa-check-circle"></i> Berbagi cerita dengan gambar</li>
                <li><i class="fas fa-check-circle"></i> Lokasi interaktif di peta</li>
                <li><i class="fas fa-check-circle"></i> Favorit & simpan offline</li>
                <li><i class="fas fa-check-circle"></i> PWA & notifikasi</li>
                <li><i class="fas fa-check-circle"></i> UI/UX modern & responsif</li>
              </ul>
            </div>
            <div class="about-card">
              <h2><i class="fas fa-code"></i> Teknologi</h2>
              <div class="tech-stack">
                <div class="tech-item"><i class="fab fa-html5"></i><span>HTML5</span></div>
                <div class="tech-item"><i class="fab fa-css3-alt"></i><span>CSS3</span></div>
                <div class="tech-item"><i class="fab fa-js"></i><span>JavaScript</span></div>
                <div class="tech-item"><i class="fas fa-map-marked-alt"></i><span>Leaflet.js</span></div>
                <div class="tech-item"><i class="fas fa-mobile-alt"></i><span>PWA</span></div>
              </div>
            </div>
            <div class="about-card">
              <h2><i class="fas fa-user-tie"></i> Developer</h2>
              <p>
                Dibuat oleh <strong>Naufal Arsyaputra Pradana</strong> untuk submission Dicoding.
              </p>
              <div class="tech-stack mt-2">
                <div class="tech-item">
                  <a href="https://github.com/NaufalArsyaputraPradana/" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i>
                    <span>GitHub</span>
                  </a>
                </div>
                <div class="tech-item">
                  <a href="https://www.linkedin.com/in/naufalarsyaputrapradana/" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-linkedin"></i>
                    <span>LinkedIn</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
      <app-footer></app-footer>
    `}async afterRender(){window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&[document.getElementById("about-app"),document.getElementById("about-features"),document.getElementById("about-tech"),document.getElementById("about-developer")].forEach((s,a)=>{s&&(s.style.opacity="0",s.style.transform="translateY(20px)",s.style.transition="opacity 0.3s, transform 0.3s",setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)"},a*100+300))});const e=document.getElementById("main-content");e&&setTimeout(()=>e.focus(),200)}}class Ya{constructor(e,o){this._model=e,this._view=o}async addStory(e,o,s,a){try{if(this._view.clearAlert(),this._view.showLoading(),!e)throw new Error("Deskripsi cerita wajib diisi");if(!o)throw new Error("Foto wajib diambil");console.log("Adding story with",s&&a?"location":"no location");const i=await this._model.addStory(e,o,s,a);console.log("Story added successfully"),this._view.showAlert("Cerita berhasil dibagikan!","success"),setTimeout(()=>{window.location.href="#/"},1500)}catch(i){console.error("Add story presenter error:",i),this._view.hideLoading(),this._view.showAlert(i.message)}}}class z{static async showNotification(e,o={}){if(!("Notification"in window))return console.warn("Browser tidak mendukung notifikasi"),!1;let s=Notification.permission;if(s==="default"&&(s=await Notification.requestPermission()),s!=="granted")return console.warn("Izin notifikasi tidak diberikan"),!1;const a=o.tag||"storyapp-add-story";if(o.tag=a,!document.hasFocus())if("serviceWorker"in navigator){const i=await navigator.serviceWorker.ready;i.getNotifications&&(await i.getNotifications({tag:a,includeTriggered:!0})).forEach(l=>l.close()),await i.showNotification(e,{badge:"/icons/badge-96x96.png",icon:"/icons/icon-192x192.png",vibrate:[200,100,200],...o})}else new Notification(e,{badge:"/icons/badge-96x96.png",icon:"/icons/icon-192x192.png",vibrate:[200,100,200],...o});return!0}static showToast(e,o="info"){const s=document.querySelector(".toast.show");s&&s.remove();const a=document.createElement("div");a.className=`toast toast-${o}`,a.innerHTML=`
      <div class="toast-icon">
        <i class="fas fa-${this.getIconForType(o)}"></i>
      </div>
      <div class="toast-message">${e}</div>
    `,document.body.appendChild(a),setTimeout(()=>a.classList.add("show"),10),setTimeout(()=>{a.classList.remove("show"),setTimeout(()=>a.remove(),300)},3e3)}static getIconForType(e){return{success:"check-circle",error:"exclamation-circle",warning:"exclamation-triangle",info:"info-circle"}[e]||"info-circle"}static async registerServiceWorker(){if(!("serviceWorker"in navigator))return console.log("Service Worker tidak didukung di browser ini"),null;try{const e=await navigator.serviceWorker.register("./sw.js",{scope:"./"});return console.log("Service Worker berhasil didaftarkan",e),e}catch(e){return console.error("Registrasi Service Worker gagal:",e),null}}static async requestPermission(){if(!("Notification"in window))return console.log("Browser tidak mendukung notifikasi"),!1;const e=await Notification.requestPermission();return e==="denied"?(console.log("Fitur notifikasi tidak diizinkan"),!1):e==="default"?(console.log("Pengguna menutup kotak dialog permintaan izin"),!1):!0}static async getVapidPublicKey(){return"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"}static async subscribePushNotification(e){if(!e.active){console.error("Service Worker tidak aktif");return}const o=await this.getVapidPublicKey(),s=this._urlBase64ToUint8Array(o);try{const a=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s});return console.log("Berhasil melakukan subscribe dengan endpoint:",a.endpoint),await this._sendSubscriptionToServer(a),a}catch(a){return console.error("Gagal melakukan subscribe:",a),null}}static async _sendSubscriptionToServer(e){const o=localStorage.getItem("token");if(!o){console.log("User perlu login untuk menerima notifikasi");return}try{const s=await fetch("https://story-api.dicoding.dev/v1/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({endpoint:e.endpoint,keys:{p256dh:e.getKey("p256dh"),auth:e.getKey("auth")}})}),a=await s.json();if(!s.ok||a.error)throw new Error(a.message||"Subscription failed");console.log("Subscription berhasil dikirim ke server:",a)}catch(s){console.error("Gagal mengirim subscription ke server:",s)}}static _urlBase64ToUint8Array(e){const o="=".repeat((4-e.length%4)%4),s=(e+o).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(s),i=new Uint8Array(a.length);for(let r=0;r<a.length;r++)i[r]=a.charCodeAt(r);return i}}class Ja{constructor(){this._model=new pe,this._presenter=null,this._map=null,this._marker=null,this._cameraStream=null,this._photoBlob=null,this._selectedLocation=null,this._photoSource=null,this._hashChangeHandler=null}async render(){return`
      <section class="add-story-page page-transition">
        <div class="coordinator-layout">
          <div class="coordinator-header">
            <div>
              <h2 class="coordinator-title">Tambah Cerita Baru</h2>
              <p>Bagikan pengalaman dan cerita menarikmu dengan komunitas</p>
            </div>
          </div>
          <div class="form-container">
            <div id="alert-container"></div>
            <form id="add-story-form">
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-camera"></i> Foto Cerita
                </label>
                <div class="camera-container">
                  <div class="camera-preview">
                    <video id="camera-stream" autoplay playsinline></video>
                    <canvas id="photo-canvas" class="hidden"></canvas>
                    <img id="photo-preview" class="hidden" alt="Preview foto yang diambil">
                  </div>
                  <div class="camera-buttons">
                    <button type="button" id="start-camera" class="btn">
                      <i class="fas fa-camera"></i> Mulai Kamera
                    </button>
                    <button type="button" id="upload-photo" class="btn">
                      <i class="fas fa-upload"></i> Upload Foto
                    </button>
                    <input type="file" id="photo-upload" accept="image/*" class="hidden">
                    <button type="button" id="capture-photo" class="btn hidden" disabled>
                      <i class="fas fa-camera-retro"></i> Ambil Foto
                    </button>
                    <button type="button" id="retake-photo" class="btn hidden">
                      <i class="fas fa-redo"></i> Ambil Ulang
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="description" class="form-label">
                  <i class="fas fa-pen"></i> Deskripsi Cerita
                </label>
                <textarea 
                  id="description" 
                  name="description" 
                  class="form-textarea" 
                  required
                  placeholder="Ceritakan pengalamanmu..."
                ></textarea>
              </div>
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-map-marker-alt"></i> Lokasi
                </label>
                <p class="form-help">Klik pada peta untuk menandai lokasi ceritamu</p>
                <div id="storyMap" class="map-container"></div>
                <div id="location-info" class="location-info hidden">
                  <div>
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Koordinat: <span id="location-text"></span></span>
                  </div>
                  <button type="button" id="clear-location" class="btn btn-sm btn-danger">
                    <i class="fas fa-times"></i> Hapus Lokasi
                  </button>
                </div>
              </div>
              <div class="form-actions">
                <a href="#/" class="btn btn-secondary">Batal</a>
                <button type="submit" class="btn btn-success">
                  <i class="fas fa-paper-plane"></i> Bagikan Cerita
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
    `}async afterRender(){this._presenter=new Ya(this._model,this),setTimeout(()=>this._initMap(),100),this._initCameraButtons(),this._initFormSubmission(),this._setupHashChangeListener()}_setupHashChangeListener(){this._hashChangeHandler=()=>{this._stopCameraStream()},window.addEventListener("hashchange",this._hashChangeHandler)}_initMap(){try{this._map=L.map("storyMap").setView([-2.5489,118.0149],5);const e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),o=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}),s=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',maxZoom:17}),a={OpenStreetMap:e,Satelit:o,Topografi:s};L.control.layers(a).addTo(this._map),e.addTo(this._map),this._map.on("click",i=>this._handleMapClick(i.latlng)),this._map.locate({setView:!0,maxZoom:16}),this._map.on("locationfound",i=>this._map.setView(i.latlng,16)),setTimeout(()=>this._map.invalidateSize(),100)}catch(e){console.error("Error initializing map:",e)}}_handleMapClick(e){this._marker&&this._map.removeLayer(this._marker),this._marker=L.marker(e).addTo(this._map),this._marker.bindPopup("Lokasi cerita Anda").openPopup(),this._selectedLocation={lat:e.lat,lon:e.lng};const o=document.getElementById("location-info"),s=document.getElementById("location-text");if(o&&s){o.classList.remove("hidden"),s.textContent=`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`;const a=document.getElementById("clear-location");a&&a.addEventListener("click",()=>this._clearLocation())}}_clearLocation(){this._marker&&(this._map.removeLayer(this._marker),this._marker=null),this._selectedLocation=null;const e=document.getElementById("location-info");e&&e.classList.add("hidden")}_initCameraButtons(){const e=document.getElementById("start-camera"),o=document.getElementById("capture-photo"),s=document.getElementById("retake-photo"),a=document.getElementById("upload-photo"),i=document.getElementById("photo-upload");!e||!o||!s||!a||!i||(e.addEventListener("click",()=>this._startCamera()),o.addEventListener("click",()=>this._capturePhoto()),s.addEventListener("click",()=>this._retakePhoto()),a.addEventListener("click",()=>i.click()),i.addEventListener("change",r=>this._handlePhotoUpload(r)))}_handlePhotoUpload(e){const o=e.target.files[0];if(!o)return;if(!o.type.startsWith("image/")){this.showAlert("Silakan pilih file gambar");return}this._photoSource="upload";const s=new FileReader;s.onload=a=>{const i=document.getElementById("photo-preview");i&&(i.src=a.target.result,i.classList.remove("hidden"));const r=document.getElementById("camera-stream");r&&r.classList.add("hidden"),this._stopCameraStream(),fetch(a.target.result).then(l=>l.blob()).then(l=>{this._photoBlob=l}),this._toggleCameraButtons("upload")},s.readAsDataURL(o)}async _startCamera(){try{this._cameraStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});const e=document.getElementById("camera-stream");if(!e)throw new Error("Video element not found");e.srcObject=this._cameraStream,e.classList.remove("hidden");const o=document.getElementById("photo-preview");o&&o.classList.add("hidden"),this._toggleCameraButtons("camera")}catch(e){this.showAlert("Tidak dapat mengakses kamera: "+e.message)}}_capturePhoto(){try{const e=document.getElementById("camera-stream"),o=document.getElementById("photo-canvas"),s=document.getElementById("photo-preview");if(!e||!o||!s)throw new Error("Required elements not found");o.width=e.videoWidth,o.height=e.videoHeight,o.getContext("2d").drawImage(e,0,0,o.width,o.height),o.toBlob(i=>{this._photoBlob=i,this._photoSource="camera";const r=URL.createObjectURL(i);s.src=r,s.classList.remove("hidden"),e.classList.add("hidden"),this._stopCameraStream(),this._toggleCameraButtons("captured")},"image/jpeg",.8)}catch(e){this.showAlert("Error capturing photo: "+e.message)}}_retakePhoto(){this._photoBlob=null,this._photoSource=null;const e=document.getElementById("start-camera"),o=document.getElementById("upload-photo");e&&e.classList.remove("hidden"),o&&o.classList.remove("hidden");const s=document.getElementById("retake-photo");s&&s.classList.add("hidden");const a=document.getElementById("photo-preview");a&&a.classList.add("hidden");const i=document.getElementById("capture-photo");i&&(i.classList.add("hidden"),i.disabled=!0);const r=document.getElementById("camera-stream");r&&r.classList.add("hidden");const l=document.getElementById("photo-upload");l&&(l.value="")}_toggleCameraButtons(e){const o=document.getElementById("start-camera"),s=document.getElementById("upload-photo"),a=document.getElementById("capture-photo"),i=document.getElementById("retake-photo");e==="camera"?(a&&(a.disabled=!1,a.classList.remove("hidden")),o&&o.classList.add("hidden"),s&&s.classList.add("hidden"),i&&i.classList.add("hidden")):e==="upload"?(o&&o.classList.add("hidden"),s&&s.classList.add("hidden"),a&&(a.classList.add("hidden"),a.disabled=!0),i&&(i.classList.remove("hidden"),i.innerHTML='<i class="fas fa-redo"></i> Upload Ulang')):e==="captured"&&(i&&(i.classList.remove("hidden"),i.innerHTML='<i class="fas fa-redo"></i> Ambil Ulang'),a&&(a.classList.add("hidden"),a.disabled=!0),o&&o.classList.add("hidden"),s&&s.classList.add("hidden"))}_stopCameraStream(){this._cameraStream&&(this._cameraStream.getTracks().forEach(o=>o.stop()),this._cameraStream=null)}_initFormSubmission(){const e=document.getElementById("add-story-form");e&&e.addEventListener("submit",async o=>{o.preventDefault();const s=document.getElementById("description").value;if(!this._photoBlob){this.showAlert("Silakan ambil foto terlebih dahulu");return}if(!s){this.showAlert("Silakan masukkan deskripsi cerita");return}const a=this._selectedLocation?this._selectedLocation.lat:null,i=this._selectedLocation?this._selectedLocation.lon:null;await this._presenter.addStory(s,this._photoBlob,a,i),z.showToast("Cerita berhasil dibagikan!","success"),z.showNotification("Cerita berhasil dibagikan!",{body:"Cerita kamu sudah terpublikasi.",tag:"storyapp-add-story"})})}showLoading(){const e=document.querySelector('#add-story-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Mengirim...',e.disabled=!0)}hideLoading(){const e=document.querySelector('#add-story-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-paper-plane"></i> Bagikan Cerita',e.disabled=!1)}showAlert(e,o="danger"){const s=document.getElementById("alert-container");s&&(s.innerHTML=`
      <div class="alert alert-${o}">
        <i class="fas fa-${o==="danger"?"exclamation-triangle":"check-circle"}"></i>
        ${e}
      </div>
    `,s.scrollIntoView({behavior:"smooth"}))}clearAlert(){const e=document.getElementById("alert-container");e&&(e.innerHTML="")}beforeUnload(){this._stopCameraStream(),this._hashChangeHandler&&(window.removeEventListener("hashchange",this._hashChangeHandler),this._hashChangeHandler=null),this._map&&(this._map.remove(),this._map=null)}}class Xa{constructor(e,o){this._model=e,this._view=o}async getStoriesWithLocation(){try{this._view.showLoading();const o=(await this._model.getStories(1,100,1)).filter(s=>s.lat&&s.lon);console.log("Stories with location:",o.length),this._view.renderStoriesOnMap(o)}catch(e){console.error("Map presenter error:",e),this._view.showError(e.message)}}}class Qa{constructor(){this._model=new pe,this._presenter=null,this._map=null,this._markers=[],this._markerCluster=null}async render(){return console.log("Rendering map page"),`
      <section class="map-page page-transition">
        <div class="coordinator-layout">
          <div class="coordinator-header">
            <div>
              <h2 class="coordinator-title">Peta Cerita</h2>
              <p>Jelajahi cerita berdasarkan lokasi di seluruh dunia</p>
            </div>
            <div class="map-controls">
              <div class="map-info">
                <span class="map-stats">
                  <i class="fas fa-map-marker-alt"></i> <span id="stories-count">0</span> Cerita dengan Lokasi
                </span>
              </div>
            </div>
          </div>
          
          <div class="map-container-wrapper">
            <div id="stories-map-container" class="stories-map-container">
              <!-- Map will be rendered here -->
            </div>
            <div id="map-loading-overlay" class="map-loading-overlay">
              <div class="loader"></div>
            </div>
          </div>
          
          <div id="error-container" class="error-container hidden"></div>
        </div>
      </section>
    `}async afterRender(){console.log("Map page afterRender"),this._presenter=new Xa(this._model,this),setTimeout(()=>{this._initMap(),this._presenter.getStoriesWithLocation()},100)}_initMap(){try{console.log("Initializing stories map"),this._map=L.map("stories-map-container").setView([-2.5489,118.0149],5);const e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),o=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}),s=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',maxZoom:17}),a=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19}),i=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}),r={OpenStreetMap:e,"CartoDB Light":a,"Stamen Terrain":i,Satelit:o,Topografi:s};L.control.layers(r).addTo(this._map),L.control.scale().addTo(this._map),e.addTo(this._map),this._map.locate({setView:!0,maxZoom:6}),this._markerCluster=L.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:50,iconCreateFunction:function(l){const d=l.getChildCount();let g="small";return d>10&&(g="medium"),d>25&&(g="large"),L.divIcon({html:`<div class="cluster-icon"><span>${d}</span></div>`,className:`marker-cluster marker-cluster-${g}`,iconSize:L.point(40,40)})}}),this._map.addLayer(this._markerCluster),setTimeout(()=>{this._map.invalidateSize()},100)}catch(e){console.error("Error initializing map:",e)}}showLoading(){const e=document.getElementById("map-loading-overlay");e&&e.classList.add("active");const o=document.getElementById("error-container");o&&o.classList.add("hidden")}hideLoading(){const e=document.getElementById("map-loading-overlay");e&&e.classList.remove("active")}renderStoriesOnMap(e){if(console.log("Rendering stories on map:",e.length),this.hideLoading(),this._clearMarkers(),e.length===0){this.showError("Tidak ada cerita dengan lokasi yang tersedia");return}const o=document.getElementById("stories-count");o&&(o.textContent=e.length),e.forEach(s=>{if(s.lat&&s.lon)try{const a=L.marker([s.lat,s.lon],{icon:L.divIcon({html:'<div class="custom-marker"><i class="fas fa-map-marker-alt"></i></div>',className:"custom-marker-container",iconSize:[30,42],iconAnchor:[15,42]})}),i=`
            <div class="map-popup">
              <img src="${s.photoUrl}" alt="${s.name}" width="100%">
              <h3>${s.name}</h3>
              <p>${this._truncateText(s.description,100)}</p>
              <button class="btn view-details-btn" data-id="${s.id}">
                <i class="fas fa-eye"></i> View Details
              </button>
            </div>
          `;a.bindPopup(i,{maxWidth:300,minWidth:200,className:"custom-popup"}),this._markerCluster.addLayer(a),this._markers.push(a),a.on("popupopen",()=>{const r=document.querySelector(`.view-details-btn[data-id="${s.id}"]`);r&&r.addEventListener("click",()=>{window.selectedStoryId=s.id,window.location.href="#/detail"})})}catch(a){console.error("Error adding marker for story:",s.id,a)}}),this._markers.length>0&&this._markerCluster.getLayers().length>0&&this._map.fitBounds(this._markerCluster.getBounds().pad(.1))}_clearMarkers(){this._markerCluster&&this._markerCluster.clearLayers(),this._markers=[]}showError(e){this.hideLoading();const o=document.getElementById("error-container");if(!o){console.error("Error container not found");return}o.classList.remove("hidden"),o.innerHTML=`
      <div class="error-content">
        <i class="fas fa-exclamation-triangle fa-3x"></i>
        <h3>Tidak ada cerita dengan lokasi</h3>
        <p>${e}</p>
        <button id="retry-button" class="btn">
          <i class="fas fa-sync-alt"></i> Coba Lagi
        </button>
      </div>
    `;const s=document.getElementById("retry-button");s&&s.addEventListener("click",async()=>{await this._presenter.getStoriesWithLocation()})}_truncateText(e,o){return e.length<=o?e:e.substr(0,o)+"..."}beforeUnload(){this._map&&(this._map.remove(),this._map=null)}}class ei{constructor(e,o){this._model=e,this._view=o}async getStoryDetail(e){try{this._view.showLoading();const o=await this._model.getStoryDetail(e);this._view.renderStoryDetail(o)}catch(o){console.error("Detail presenter error:",o),this._view.showError(o.message)}}}class ti{constructor(){this._model=new pe,this._presenter=null,this._map=null}async render(){return document.title="Detail Cerita - StoryApp",`
      <section class="detail-page page-transition">
        <div id="story-detail-container" class="story-detail-card">
          <div class="loader" id="detail-loader"></div>
        </div>
        <div id="error-container" class="error-container hidden"></div>
      </section>
    `}async afterRender(){const e=window.selectedStoryId;if(!e){this.showError("ID cerita tidak ditemukan");return}this._presenter=new ei(this._model,this),await this._presenter.getStoryDetail(e)}showLoading(){const e=document.getElementById("detail-loader");e&&e.classList.remove("hidden");const o=document.getElementById("error-container");o&&o.classList.add("hidden")}hideLoading(){const e=document.getElementById("detail-loader");e&&e.classList.add("hidden")}renderStoryDetail(e){this.hideLoading();const o=document.getElementById("story-detail-container");if(!o)return;const s=e.name.charAt(0).toUpperCase();o.innerHTML=`
      <div class="detail-card">
        <div class="detail-header">
          <button class="modal-close" aria-label="Tutup">&times;</button>
          <div class="user-info">
            <div class="user-avatar">${s}</div>
            <div>
              <span class="user-name">${e.name}</span>
              <span class="story-date"><i class="fas fa-calendar-alt"></i> ${this._formatDate(e.createdAt)}</span>
            </div>
          </div>
        </div>
        <div class="detail-image-container">
          <img 
            src="${e.photoUrl}" 
            alt="Cerita dari ${e.name}" 
            class="detail-image"
            loading="lazy"
            onerror="this.src='./fallback.jpg';"
          />
        </div>
        <div class="detail-content">
          <div class="story-meta">
            ${e.lat&&e.lon?`<div class="story-info">
                <i class="fas fa-map-marker-alt"></i>
                <span>Koordinat: ${e.lat.toFixed(6)}, ${e.lon.toFixed(6)}</span>
              </div>`:`<div class="story-info">
                <i class="fas fa-map-marker-alt"></i>
                <span>Tidak ada informasi lokasi</span>
              </div>`}
          </div>
          <div class="story-description-full">
            <h3><i class="fas fa-book-open"></i> Cerita</h3>
            <p>${e.description}</p>
          </div>
          ${e.lat&&e.lon?`<div class="story-location">
              <h3><i class="fas fa-map-marked-alt"></i> Lokasi</h3>
              <div class="story-location-map" id="detail-map"></div>
            </div>`:""}
        </div>
        <div class="detail-footer">
          <a href="#/" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Kembali ke Beranda</a>
        </div>
      </div>
    `;const a=o.querySelector(".modal-close");a&&a.addEventListener("click",()=>{window.location.href="#/"}),e.lat&&e.lon&&setTimeout(()=>{this._initMap(e)},100)}_initMap(e){try{this._map=L.map("detail-map").setView([e.lat,e.lon],13);const o=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),s=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}),a=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',maxZoom:17}),i={OpenStreetMap:o,Satelit:s,Topografi:a};L.control.layers(i).addTo(this._map),o.addTo(this._map),L.marker([e.lat,e.lon]).addTo(this._map).bindPopup(`<b>${e.name}'s Story</b><br>${this._truncateText(e.description,100)}`).openPopup(),setTimeout(()=>{this._map.invalidateSize()},100)}catch(o){console.error("Error initializing map:",o)}}showError(e){this.hideLoading();const o=document.getElementById("error-container");o&&(o.classList.remove("hidden"),o.innerHTML=`
      <div class="error-content">
        <i class="fas fa-exclamation-triangle fa-3x"></i>
        <h3>Story not found</h3>
        <p>${e}</p>
        <a href="#/" class="btn">Kembali ke Beranda</a>
      </div>
    `)}_formatDate(e){const o={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString("id-ID",o)}_truncateText(e,o){return e.length<=o?e:e.substr(0,o)+"..."}beforeUnload(){this._map&&(this._map.remove(),this._map=null)}}class Kt{constructor(){this._baseUrl="https://story-api.dicoding.dev/v1"}async login(e,o){try{const a=await(await fetch(`${this._baseUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:o})})).json();if(a.error)throw new Error(a.message);return a.loginResult}catch(s){throw new Error(s.message||"Gagal melakukan login")}}async register(e,o,s){try{const i=await(await fetch(`${this._baseUrl}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:o,password:s})})).json();if(i.error)throw new Error(i.message);return i}catch(a){throw new Error(a.message||"Gagal melakukan registrasi")}}async subscribeNotification(e){try{const o=localStorage.getItem("token");if(!o)throw new Error("Anda belum login");const a=await(await fetch(`${this._baseUrl}/notifications/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)})).json();if(a.error)throw new Error(a.message);return a}catch(o){throw new Error(o.message||"Gagal berlangganan notifikasi")}}async unsubscribeNotification(e){try{const o=localStorage.getItem("token");if(!o)throw new Error("Anda belum login");const a=await(await fetch(`${this._baseUrl}/notifications/subscribe`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({endpoint:e})})).json();if(a.error)throw new Error(a.message);return a}catch(o){throw new Error(o.message||"Gagal berhenti berlangganan notifikasi")}}}class oi{constructor(e,o){this._model=e,this._view=o}async login(e,o){try{if(this._view.clearAlert(),this._view.showLoading(),!e||!o)throw new Error("Email dan password harus diisi");if(o.length<8)throw new Error("Password minimal 8 karakter");const s=await this._model.login(e,o);y.setUserData(s),this._view.showAlert("Login berhasil! Mengalihkan...","success"),setTimeout(()=>{window.location.href="#/",window.location.reload()},1200)}catch(s){this._view.hideLoading(),this._view.showAlert(s.message)}}}class si{constructor(){this._model=new Kt,this._presenter=null}async render(){return`
      <section class="login-page page-transition">
        <div class="form-container">
          <h2 class="form-title"><i class="fas fa-sign-in-alt"></i> Login ke StoryApp</h2>
          <div id="alert-container"></div>
          <form id="login-form" autocomplete="on">
            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input"
                required
                placeholder="Masukkan email Anda"
                autocomplete="username"
              >
            </div>
            <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input"
                required
                placeholder="Masukkan password"
                minlength="8"
                autocomplete="current-password"
              >
            </div>
            <button type="submit" class="btn btn-block btn-primary">
              <i class="fas fa-sign-in-alt"></i> Login
            </button>
          </form>
          <div class="form-footer">
            <p>Belum memiliki akun? <a href="#/register">Daftar Sekarang</a></p>
          </div>
        </div>
      </section>
    `}async afterRender(){this._presenter=new oi(this._model,this);const e=document.getElementById("login-form");e&&e.addEventListener("submit",async o=>{o.preventDefault();const s=document.getElementById("email").value,a=document.getElementById("password").value;await this._presenter.login(s,a)})}showLoading(){const e=document.querySelector('#login-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Loading...',e.disabled=!0)}hideLoading(){const e=document.querySelector('#login-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-sign-in-alt"></i> Login',e.disabled=!1)}showAlert(e,o="danger"){const s=document.getElementById("alert-container");s&&(s.innerHTML=`
        <div class="alert alert-${o}">
          ${o==="success"?'<i class="fas fa-check-circle"></i>':'<i class="fas fa-exclamation-circle"></i>'}
          ${e}
        </div>
      `,s.scrollIntoView({behavior:"smooth"}))}clearAlert(){const e=document.getElementById("alert-container");e&&(e.innerHTML="")}}class ai{constructor(e,o){this._model=e,this._view=o}async register(e,o,s,a){try{if(this._view.clearAlert(),this._view.showLoading(),!e||!o||!s||!a)throw new Error("Semua field harus diisi");if(s.length<8)throw new Error("Password minimal 8 karakter");if(s!==a)throw new Error("Password dan konfirmasi password tidak cocok");await this._model.register(e,o,s),this._view.showAlert("Registrasi berhasil. Silakan login.","success"),setTimeout(()=>{window.location.href="#/login"},1500)}catch(i){this._view.hideLoading(),this._view.showAlert(i.message)}}}class ii{constructor(){this._model=new Kt,this._presenter=null}async render(){return`
      <section class="register-page page-transition">
        <div class="form-container">
          <h2 class="form-title"><i class="fas fa-user-plus"></i> Daftar Akun Baru</h2>
          <div id="alert-container"></div>
          <form id="register-form" autocomplete="on">
            <div class="form-group">
              <label for="name" class="form-label">Nama</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                class="form-input"
                required
                placeholder="Masukkan nama Anda"
                autocomplete="name"
              >
            </div>
            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input"
                required
                placeholder="Masukkan email Anda"
                autocomplete="email"
              >
            </div>
            <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input"
                required
                placeholder="Masukkan password"
                minlength="8"
                autocomplete="new-password"
              >
              <small>Password minimal 8 karakter</small>
            </div>
            <div class="form-group">
              <label for="confirmPassword" class="form-label">Konfirmasi Password</label>
              <input 
                type="password" 
                id="confirmPassword" 
                name="confirmPassword" 
                class="form-input"
                required
                placeholder="Konfirmasi password Anda"
                minlength="8"
                autocomplete="new-password"
              >
            </div>
            <button type="submit" class="btn btn-block btn-primary">
              <i class="fas fa-user-plus"></i> Daftar
            </button>
          </form>
          <div class="form-footer">
            <p>Sudah memiliki akun? <a href="#/login">Login Sekarang</a></p>
          </div>
        </div>
      </section>
    `}async afterRender(){this._presenter=new ai(this._model,this);const e=document.getElementById("register-form");e&&e.addEventListener("submit",async o=>{o.preventDefault();const s=document.getElementById("name").value,a=document.getElementById("email").value,i=document.getElementById("password").value,r=document.getElementById("confirmPassword").value;await this._presenter.register(s,a,i,r)})}showLoading(){const e=document.querySelector('#register-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Loading...',e.disabled=!0)}hideLoading(){const e=document.querySelector('#register-form button[type="submit"]');e&&(e.innerHTML='<i class="fas fa-user-plus"></i> Daftar',e.disabled=!1)}showAlert(e,o="danger"){const s=document.getElementById("alert-container");s&&(s.innerHTML=`
        <div class="alert alert-${o}">
          ${o==="success"?'<i class="fas fa-check-circle"></i>':'<i class="fas fa-exclamation-circle"></i>'}
          ${e}
        </div>
      `,s.scrollIntoView({behavior:"smooth"}))}clearAlert(){const e=document.getElementById("alert-container");e&&(e.innerHTML="")}}class ni{constructor(){this._title="Halaman Tidak Ditemukan - StoryApp"}async render(){return document.title=this._title,`
      <section class="not-found-page page-transition">
        <div class="not-found-container">
          <div class="not-found-content">
            <h1>404</h1>
            <h2>Halaman Tidak Ditemukan</h2>
            <p>Maaf, halaman yang Anda cari tidak tersedia atau mungkin telah dipindahkan.</p>
            <a href="#/" class="btn btn-primary">Kembali ke Beranda</a>
          </div>
        </div>
      </section>
    `}async afterRender(){const e=document.querySelector(".not-found-content");e&&e.classList.add("animate-fade-in")}}class ri{constructor(){this._title="Cerita Favorit - StoryApp"}async render(){return document.title=this._title,`
      <section class="favorites-page page-transition">
        <div class="favorites-header-card">
          <div class="favorites-header-content">
            <div>
              <h2 class="favorites-title"><i class="fas fa-bookmark"></i> Cerita Favorit</h2>
              <p class="favorites-subtitle">Kumpulan cerita yang Anda tandai sebagai favorit. Cerita favorit dapat diakses secara offline.</p>
            </div>
            <a href="#/" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Kembali ke Beranda
            </a>
          </div>
        </div>
        <div class="favorites-content-container">
          <div id="favorites-container" class="favorites-grid">
            <div class="loader" id="favorites-loader"></div>
          </div>
          <div id="error-container" class="error-container hidden"></div>
        </div>
      </section>
    `}async afterRender(){if(!y.isLoggedIn()){window.location.href="#/login";return}this.showLoading();try{const e=await k.getFavorites();this.renderFavorites(e)}catch(e){console.error("Error loading favorites:",e),this.showError("Gagal memuat cerita favorit: "+e.message)}}showLoading(){const e=document.getElementById("favorites-loader");e&&e.classList.remove("hidden");const o=document.getElementById("error-container");o&&o.classList.add("hidden")}hideLoading(){const e=document.getElementById("favorites-loader");e&&e.classList.add("hidden")}async renderFavorites(e){this.hideLoading();const o=document.getElementById("favorites-container");if(o){if(!e||e.length===0){o.innerHTML=`
        <div class="empty-state">
          <i class="fas fa-bookmark"></i>
          <h3>Belum ada cerita favorit</h3>
          <p>Tambahkan cerita ke favorit untuk melihatnya di sini.</p>
          <a href="#/" class="btn btn-primary">Jelajahi Cerita</a>
        </div>
      `;return}o.innerHTML="",e.forEach(s=>{const a=s.name.charAt(0).toUpperCase(),i=document.createElement("article");i.classList.add("story-card"),i.innerHTML=`
        <div class="story-image-container">
          <img
            src="${s.photoUrl}"
            alt="Cerita dari ${s.name}"
            class="story-image"
            loading="lazy"
            onerror="this.src='./src/public/fallback.jpg';"
          />
        </div>
        <div class="story-content">
          <div class="user-info">
            <div class="user-avatar">${a}</div>
            <span class="user-name">${s.name}</span>
          </div>
          <h3 class="story-title">${s.name}</h3>
          <p class="story-description">${this._truncateText(s.description,100)}</p>
          <div class="story-meta">
            <div class="story-info">
              <i class="fas fa-calendar-alt"></i>
              <span>${this._formatDate(s.createdAt)}</span>
            </div>
            ${s.lat&&s.lon?`<div class="story-info">
                <i class="fas fa-map-marker-alt"></i>
                <span>Lokasi tersedia</span>
              </div>`:""}
          </div>
          <div class="story-actions">
            <button class="favorite-btn favorited" data-id="${s.id}" aria-label="Hapus dari favorit" title="Hapus dari favorit">
              <i class="fas fa-bookmark"></i>
            </button>
            <a href="#" class="view-details-btn" data-id="${s.id}">
              <i class="fas fa-eye"></i> Lihat Detail
            </a>
          </div>
        </div>
      `,o.appendChild(i),i.querySelector(".view-details-btn").addEventListener("click",d=>{d.preventDefault(),window.selectedStoryId=s.id,window.location.href="#/detail"}),i.querySelector(".favorite-btn").addEventListener("click",async d=>{d.preventDefault();try{await k.removeFromFavorites(s.id),i.remove(),(await k.getFavorites()).length===0&&this.renderFavorites([]),"Notification"in window&&Notification.permission==="granted"&&navigator.serviceWorker.ready.then(v=>{v.showNotification("StoryApp",{body:"Cerita berhasil dihapus dari favorit",icon:"./src/public/icons/icon-192x192.png",badge:"./src/public/icons/badge-96x96.png",vibrate:[100,50,100]})})}catch(g){console.error("Error removing from favorites:",g)}})})}}showError(e){this.hideLoading();const o=document.getElementById("error-container");if(!o)return;o.classList.remove("hidden"),o.innerHTML=`
      <div class="error-content">
        <i class="fas fa-exclamation-triangle fa-3x"></i>
        <h3>Gagal memuat cerita favorit</h3>
        <p>${e}</p>
        <button id="retry-button" class="btn">Coba Lagi</button>
      </div>
    `;const s=document.getElementById("retry-button");s&&s.addEventListener("click",async()=>{this.showLoading();try{const a=await k.getFavorites();this.renderFavorites(a)}catch(a){console.error("Error reloading favorites:",a),this.showError("Gagal memuat cerita favorit: "+a.message)}})}_truncateText(e,o){return e?e.length<=o?e:e.substr(0,o)+"...":""}_formatDate(e){if(!e)return"-";const o={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString("id-ID",o)}}const _e={"/":{view:Ga},"/about":{view:Za},"/add":{view:Ja},"/map":{view:Qa},"/detail":{view:ti},"/login":{view:si},"/register":{view:ii},"/favorites":{view:ri},"/404":{view:ni}};class li{static parseActiveUrlWithCombiner(){const e=window.location.hash.slice(1).toLowerCase();return this._urlCombiner(this._urlSplitter(e))}static parseActiveUrlWithoutCombiner(){const e=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(e)}static _urlSplitter(e){const o=e.split("/");return{resource:o[1]||null,id:o[2]||null,verb:o[3]||null}}static _urlCombiner(e){return e.resource?`/${e.resource}`:"/"}}class ci{static init(){this._createOfflineIndicator(),this._setupNetworkListeners(),this._updateOfflineStatus(!navigator.onLine)}static _setupNetworkListeners(){window.addEventListener("online",()=>{this._updateOfflineStatus(!1),this._showToast("Anda kembali online","success")}),window.addEventListener("offline",()=>{this._updateOfflineStatus(!0),this._showToast("Anda sedang offline. Beberapa fitur mungkin terbatas.","warning")})}static _createOfflineIndicator(){if(!document.getElementById("offline-indicator")){const e=document.createElement("div");e.id="offline-indicator",e.className="offline-indicator",e.innerHTML=`
        <i class="fas fa-wifi"></i>
        <span>Anda sedang offline. Beberapa fitur mungkin terbatas.</span>
      `,document.body.insertBefore(e,document.body.firstChild)}}static _updateOfflineStatus(e){const o=document.getElementById("offline-indicator");o&&(e?(o.classList.add("show"),clearTimeout(this._offlineTimeout),this._offlineTimeout=setTimeout(()=>{o.classList.remove("show")},4e3)):(o.classList.remove("show"),clearTimeout(this._offlineTimeout)))}static _showToast(e,o="info"){let s=document.getElementById("network-toast");s&&s.remove(),s=document.createElement("div"),s.id="network-toast",s.className=`network-toast ${o}`,s.innerHTML=`
      <span class="toast-icon">
        ${o==="success"?'<i class="fas fa-signal"></i>':'<i class="fas fa-exclamation-triangle"></i>'}
      </span>
      <span class="toast-message">${e}</span>
    `,document.body.appendChild(s),setTimeout(()=>{s.classList.add("hide"),setTimeout(()=>s.remove(),400)},3e3)}static isOnline(){return navigator.onLine}}class di{static init(){this.deferredPrompt=null,this._setupEventListeners()}static _setupEventListeners(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this._showInstallBanner()}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("install-pwa"),o=document.getElementById("close-banner");e&&e.addEventListener("click",function(){window.location.href="https://arsyastoryapp.netlify.app/"}),o&&o.addEventListener("click",()=>{this._hideInstallBanner()})}),window.addEventListener("appinstalled",()=>{this._hideInstallBanner(),this.deferredPrompt=null,console.log("PWA was installed")})}static _showInstallBanner(){const e=document.getElementById("pwa-install-banner");e&&this.deferredPrompt&&(e.classList.add("show"),clearTimeout(this._bannerTimeout),this._bannerTimeout=setTimeout(()=>{this._hideInstallBanner()},5e3))}static _hideInstallBanner(){const e=document.getElementById("pwa-install-banner");e&&e.classList.remove("show")}static async _installPwa(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();const e=await this.deferredPrompt.userChoice;this.deferredPrompt=null,e.outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),this._hideInstallBanner()}}window.selectedStoryId=null;class ui{constructor(){this._currentPage=null,this._initializeApp()}async _initializeApp(){console.log("Initializing app..."),await this._initIndexedDB(),await this._initServiceWorker(),ci.init(),di.init(),await this._subscribeToPushNotification(),this._handleRoute(),window.addEventListener("hashchange",()=>{this._cleanupCurrentPage(),this._handleRoute()}),window.addEventListener("beforeunload",()=>{this._cleanupCurrentPage()}),document.addEventListener("click",e=>{e.target.tagName==="A"&&e.target.href.includes("#/")&&document.startViewTransition&&(e.preventDefault(),document.startViewTransition(()=>{window.location.href=e.target.href}))})}async _initServiceWorker(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.register("./sw.js",{scope:"./"});return console.log("Service Worker registered successfully:",e),e.addEventListener("updatefound",()=>{console.log("New service worker found, updating...")}),y.isLoggedIn()&&await z.requestPermission()&&e&&await z.subscribePushNotification(e),e}return console.warn("Service Worker not supported"),null}catch(e){return console.error("Error initializing service worker:",e),null}}async _initIndexedDB(){try{await k.openDB(),console.log("IndexedDB initialized successfully")}catch(e){console.error("Failed to initialize IndexedDB:",e)}}_checkAuthStatus(){const e=y.isLoggedIn(),o=document.getElementById("login-menu"),s=document.getElementById("register-menu"),a=document.getElementById("logout-menu");if(!o||!s||!a){console.warn("Menu items not found");return}e?(o.classList.add("hidden"),s.classList.add("hidden"),a.classList.remove("hidden"),this._subscribeToPushNotification()):(o.classList.remove("hidden"),s.classList.remove("hidden"),a.classList.add("hidden")),a.addEventListener("click",i=>{i.preventDefault(),this._handleLogout()})}async _subscribeToPushNotification(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.ready;await z.requestPermission()&&e&&await z.subscribePushNotification(e)}}catch(e){console.error("Error subscribing to push notification:",e)}}async _handleLogout(){this._cleanupCurrentPage(),y.logout();try{await k.clearStories(),console.log("Stories cleared from IndexedDB after logout")}catch(e){console.error("Error clearing stories from IndexedDB:",e)}window.location.href="#/",window.location.reload()}_cleanupCurrentPage(){this._currentPage&&typeof this._currentPage.beforeUnload=="function"&&(this._currentPage.beforeUnload(),this._currentPage=null)}async _handleRoute(){var a;this._cleanupCurrentPage();const e=window.location.hash.slice(1).split("/");e.length>2&&e[1]==="detail"&&(window.selectedStoryId=e[2],window.history.replaceState(null,null,"#/detail"));const o=li.parseActiveUrlWithCombiner();let s;_e[o]?s=_e[o]:s=_e["/404"];try{if((o==="/login"||o==="/register")&&y.isLoggedIn()){window.location.href="#/";return}if((o==="/add"||o==="/map"||o==="/favorites")&&!y.isLoggedIn()){window.location.href="#/login";return}const i=document.querySelector("#content");if(!i){console.error("Content container not found");return}i.innerHTML="",this._currentPage=new s.view;const r=await this._currentPage.render();i.innerHTML=r,await this._currentPage.afterRender(),(a=document.getElementById("main-content"))==null||a.focus()}catch(i){console.error("Error rendering page:",i)}}}document.addEventListener("DOMContentLoaded",()=>{window.app=new ui});
